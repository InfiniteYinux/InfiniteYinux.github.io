<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Yinux&#39;s Blog</title>
  
  <subtitle>Welcome to Yinux&#39;s Blog</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://www.codingpy.cn/"/>
  <updated>2019-09-21T02:21:48.795Z</updated>
  <id>http://www.codingpy.cn/</id>
  
  <author>
    <name>Yinux</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>用Python来分析一波周董新曲《说好不哭》为何如此火爆！</title>
    <link href="http://www.codingpy.cn/2019/09/20/script_don&#39;tcry/"/>
    <id>http://www.codingpy.cn/2019/09/20/script_don&#39;tcry/</id>
    <published>2019-09-20T12:30:00.000Z</published>
    <updated>2019-09-21T02:21:48.795Z</updated>
    
    <content type="html"><![CDATA[<p><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/article@master/img/don'tcry/output_1.jpg" alt="png"></fancybox></p><p>9 月 16 日晚间，周董在朋友圈发布了最新单曲《说好不哭》</p><p>发布后，真的让一波人哭了</p><p>一群想抢鲜听的小伙伴直接泪奔</p><p>因为 QQ 音乐直接被搞崩了</p><p>没想到干翻 QQ 音乐的不是网易云音乐</p><p>也不是虾米音乐</p><p>而是周董！</p><p>周董成成功地凭一己之力干翻了 QQ 音乐</p><p>那么听过周董新歌后的小伙伴都是怎么评价的呢？</p><p>这里，我们获取了 QQ 音乐的近 20W 条评论数据进行分析</p><p>看看其中有哪些有趣的东西</p><h1 id="一、数据获取"><a href="#一、数据获取" class="headerlink" title="一、数据获取"></a>一、数据获取</h1><h2 id="1、请求分析"><a href="#1、请求分析" class="headerlink" title="1、请求分析"></a>1、请求分析</h2><p>在 QQ 网页版直接搜索『说好不哭』<br>很容易就能找到单曲页面<br><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/article@master/img/don'tcry/output_2.jpg" alt="png"></fancybox></p><center><font size="1" color="000000" face="楷体">说好不哭</font></center><p>拉到页面最下方<br>可以看到评论的分页查看按钮<br><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/article@master/img/don'tcry/output_3.jpg" alt="png"></fancybox></p><center><font size="1" color="000000" face="楷体">分页查看</font></center><p>按下 F12 点击第二页<br>在请求流中就可以看到对应的请求<br><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/article@master/img/don'tcry/output_4.jpg" alt="png"></fancybox></p><center><font size="1" color="000000" face="楷体">评论请求</font></center><p>其中可以看到两个重要参数：&lt;fontcolor = “FF0000”&gt;pagenum 和 &lt;fontcolor = “FF0000”&gt;pagesize</p><p>将请求 copy 到 Postman 中进行测试<br><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/article@master/img/don'tcry/output_5.jpg" alt="png"></fancybox></p><center><font size="1" color="000000" face="楷体">Postman测试</font></center><p>发现可以直接获取到数据<br>连 Header 都不需要添加<br>这里尝试对请求参数进行了精简<br>最终只需要如下几个参数即可<br><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/article@master/img/don'tcry/output_6.jpg" alt="png"></fancybox></p><center><font size="1" color="000000" face="楷体">参数精简</font></center><p>从 Postman 中可以直接获取到对应的代码</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">import requests</span><br><span class="line"></span><br><span class="line">url = &quot;https://c.y.qq.com/base/fcgi-bin/fcg_global_comment_h5.fcg&quot;</span><br><span class="line"></span><br><span class="line">querystring = &#123;&quot;biztype&quot;:&quot;1&quot;,&quot;topid&quot;:&quot;237773700&quot;,&quot;cmd&quot;:&quot;8&quot;,&quot;pagenum&quot;:&quot;1&quot;,&quot;pagesize&quot;:&quot;25&quot;&#125;</span><br><span class="line"></span><br><span class="line">response = requests.request(&quot;GET&quot;, url, params=querystring)</span><br><span class="line"></span><br><span class="line">print(response.text)</span><br></pre></td></tr></table></figure><p>这里是单页评论的获取<br>所有评论的获取只需递增 pagenum 即可</p><h2 id="2、数据解析"><a href="#2、数据解析" class="headerlink" title="2、数据解析"></a>2、数据解析</h2><p>返回数据中有很多暂时不需要的字段<br>这里我们只取其中的用户名、评论时间、评论内容、点赞数<br>对应如下字段</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;nick&quot;: &quot;丨那壹刻永遠消失\&quot;\&quot;&quot;,</span><br><span class="line">    &quot;praisenum&quot;: 1,</span><br><span class="line">    &quot;rootcommentcontent&quot;: &quot;越听越好听怎么回事！&quot;,</span><br><span class="line">    &quot;time&quot;: 1568729836,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>由于数据量较大 这里我们暂时将数据存放在 Excel 中<br>一来无须依赖外部数据库<br>二来可以使用 Excel 对数据进行二次处理<br>数据存储代码如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">def file_do(list_info, file_name):</span><br><span class="line">    # 获取文件大小</span><br><span class="line">    if not os.path.exists(file_name):</span><br><span class="line">        wb = openpyxl.Workbook()</span><br><span class="line">        page = wb.active</span><br><span class="line">        page.title = &apos;jay&apos;</span><br><span class="line">        page.append([&apos;昵称&apos;,&apos;时间&apos;,&apos;点赞数&apos;,&apos;评论&apos;])</span><br><span class="line">    else:</span><br><span class="line">        wb = openpyxl.load_workbook(file_name)</span><br><span class="line">        page = wb.active</span><br><span class="line">    for info in list_info:</span><br><span class="line">        try:</span><br><span class="line">            page.append(info)</span><br><span class="line">        except Exception:</span><br><span class="line">            print(info)</span><br><span class="line">    wb.save(filename=file_name)</span><br></pre></td></tr></table></figure><h1 id="二、数据可视化"><a href="#二、数据可视化" class="headerlink" title="二、数据可视化"></a>二、数据可视化</h1><h2 id="1、各时段的评论数"><a href="#1、各时段的评论数" class="headerlink" title="1、各时段的评论数"></a>1、各时段的评论数</h2><p>首先我们对评论按小时区间进行汇总<br>由于时间粒度比较小，这里对时间粒度进行了一些处理<br><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/article@master/img/don'tcry/output_7.jpg" alt="png"></fancybox></p><center><font size="1" color="000000" face="楷体">评价人数走势图</font></center><p>周董的新曲是在 9.16 号 23 点准时发布的<br>可以看出在发布后的一个小时内（23:00-24:00）<br>评论数量达到了高峰<br>占了总评论数的一半以上<br>另外看了一眼 9.16 23 点之前的评论也很有意思<br><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/article@master/img/don'tcry/output_8.jpg" alt="png"></fancybox></p><p>一种搬好小板凳嗑着瓜子坐等的既视感</p><h2 id="2、大家都在说什么"><a href="#2、大家都在说什么" class="headerlink" title="2、大家都在说什么"></a>2、大家都在说什么</h2><p>词云生成的方法有很多<br>可以用代码生成<br>也可以用一些在线工具<br>这里我就使用了在线词云工具：wordart<br>后续可以给大家单独再普及一下<br>生成效果如下<br><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/article@master/img/don'tcry/output_9.jpg" alt="png"></fancybox></p><center><font size="1" color="000000" face="楷体">词云</font></center><p>周杰伦、杰伦字眼很明显<br>还有大量跑来『打卡』的<br>『好听』、『来了』、『哭了』、『爱了』<br>其中少不了的还有『青春』<br>另外『阿信』的出现估计给了很多人惊喜</p><h2 id="3、大家都点赞了哪些评论"><a href="#3、大家都点赞了哪些评论" class="headerlink" title="3、大家都点赞了哪些评论"></a>3、大家都点赞了哪些评论</h2><p>我们以点赞数对评论进行了排序<br>排名靠前的评论是如下一些<br><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/article@master/img/don'tcry/output_10.jpg" alt="png"></fancybox></p><center><font size="1" color="000000" face="楷体">评论排名</font></center><p>另外，QQ 音乐官方也会放出精彩评论<br><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/article@master/img/don'tcry/output_11.jpg" alt="png"></fancybox></p><center><font size="1" color="000000" face="楷体">热心网友昀恺丶</font></center><p><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/article@master/img/don'tcry/output_12.jpg" alt="png"></fancybox></p><center><font size="1" color="000000" face="楷体">凉城</font></center><p><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/article@master/img/don'tcry/output_13.jpg" alt="png"></fancybox></p><center><font size="1" color="000000" face="楷体">蜗牛..</font></center><p>对比下可以看出和我们获取到的数据是比较一致的<br>只不过官方并不是按点赞个数进行排名的<br>看得出来这些排名靠前的大都是在回忆青春<br>这些评论之所以能够得到大家的共鸣<br>也许他们的青春里都有一个周杰伦吧</p><h1 id="三、附件"><a href="#三、附件" class="headerlink" title="三、附件"></a>三、附件</h1><p><a href="https://cdn.jsdelivr.net/gh/InfiniteYinux/article@master/img/don'tcry/jav.csv" target="_blank" rel="noopener">QQ音乐《说好不哭》评论抓取</a></p><p><a href>评论人数走势图HTML</a></p><h1 id="四、源码"><a href="#四、源码" class="headerlink" title="四、源码"></a>四、源码</h1><h2 id="1、评论爬取源码"><a href="#1、评论爬取源码" class="headerlink" title="1、评论爬取源码"></a>1、评论爬取源码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">import requests,json,time,uuid,os,openpyxl</span><br><span class="line">import re</span><br><span class="line">from openpyxl.cell.cell import ILLEGAL_CHARACTERS_RE</span><br><span class="line"></span><br><span class="line">info_list = []</span><br><span class="line"></span><br><span class="line">def get_comment_info():</span><br><span class="line">    global info_list</span><br><span class="line">    pagenum = 1</span><br><span class="line">    while(True):</span><br><span class="line">        print(pagenum)</span><br><span class="line">        url = &quot;https://c.y.qq.com/base/fcgi-bin/fcg_global_comment_h5.fcg&quot;</span><br><span class="line"></span><br><span class="line">        querystring = &#123;&quot;biztype&quot;:&quot;1&quot;,&quot;topid&quot;:&quot;237773700&quot;,&quot;cmd&quot;:&quot;8&quot;,&quot;pagenum&quot;:pagenum,&quot;pagesize&quot;:&quot;25&quot;&#125;</span><br><span class="line"></span><br><span class="line">        response = requests.request(&quot;GET&quot;, url, params=querystring)</span><br><span class="line"></span><br><span class="line">        resp = json.loads(response.text)</span><br><span class="line"></span><br><span class="line">        commentlist = resp.get(&apos;comment&apos;).get(&apos;commentlist&apos;)</span><br><span class="line"></span><br><span class="line">        if not commentlist or len(commentlist) == 0:</span><br><span class="line">            return</span><br><span class="line"></span><br><span class="line">        for comment in commentlist:</span><br><span class="line">            info = []</span><br><span class="line">            one_name = comment.get(&apos;nick&apos;)</span><br><span class="line">            # 将 UNIX 时间戳转化为普通时间格式</span><br><span class="line">            if comment.get(&apos;time&apos;) &lt; 1568735760:</span><br><span class="line">                return</span><br><span class="line">            time_local = time.localtime(comment.get(&apos;time&apos;))</span><br><span class="line">            one_time = time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, time_local)</span><br><span class="line">            one_praisenum = comment.get(&apos;praisenum&apos;)</span><br><span class="line">            one_comment = comment.get(&apos;rootcommentcontent&apos;)</span><br><span class="line">            ILLEGAL_CHARACTERS_RE.sub(r&apos;&apos;, one_comment)</span><br><span class="line">            ILLEGAL_CHARACTERS_RE.sub(r&apos;&apos;, one_name)</span><br><span class="line">            info = [one_name, one_time, one_praisenum, one_comment]</span><br><span class="line">            # print(info)</span><br><span class="line">            info_list.append(info)</span><br><span class="line">        pagenum += 1</span><br><span class="line">            # print(comment.get(&apos;nick&apos;))</span><br><span class="line">            # print(comment.get(&apos;rootcommentcontent&apos;))</span><br><span class="line">            # print(comment.get(&apos;time&apos;))</span><br><span class="line">            # print(comment.get(&apos;praisenum&apos;))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">def file_do(file_name):</span><br><span class="line">    # 获取文件大小</span><br><span class="line">    if not os.path.exists(file_name):</span><br><span class="line">        wb = openpyxl.Workbook()</span><br><span class="line">        page = wb.active</span><br><span class="line">        page.title = &apos;jay&apos;</span><br><span class="line">        page.append([&apos;昵称&apos;,&apos;时间&apos;,&apos;点赞数&apos;,&apos;评论&apos;])</span><br><span class="line">    else:</span><br><span class="line">        wb = openpyxl.load_workbook(file_name)</span><br><span class="line">        page = wb.active</span><br><span class="line">    for info in info_list:</span><br><span class="line">        try:</span><br><span class="line">            page.append(info)</span><br><span class="line">        except Exception:</span><br><span class="line">            print(info)</span><br><span class="line">            pass</span><br><span class="line">        continue</span><br><span class="line">    wb.save(filename=file_name)</span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    file_name = str(uuid.uuid1()) + &apos;.xlsx&apos;</span><br><span class="line">    get_comment_info()</span><br><span class="line">    file_do(file_name)</span><br><span class="line">    print(&apos;data has saved in &#123;&#125;&apos;.format(file_name))</span><br></pre></td></tr></table></figure><h2 id="2、生成HTML图表源码"><a href="#2、生成HTML图表源码" class="headerlink" title="2、生成HTML图表源码"></a>2、生成HTML图表源码</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"># 导入Style类，用于定义样式风格</span><br><span class="line">from pyecharts import Style</span><br><span class="line">import json</span><br><span class="line"># 导入Geo组件，用于生成柱状图</span><br><span class="line">from pyecharts import Bar</span><br><span class="line"># 导入Counter类，用于统计值出现的次数</span><br><span class="line">from collections import Counter</span><br><span class="line"></span><br><span class="line">import fileinput,re</span><br><span class="line"></span><br><span class="line"># 设置全局主题风格</span><br><span class="line">from pyecharts import configure</span><br><span class="line">configure(global_theme=&apos;wonderland&apos;)</span><br><span class="line"></span><br><span class="line"># 数据可视化</span><br><span class="line">dates = []</span><br><span class="line">comment_text = &quot;&quot;</span><br><span class="line"></span><br><span class="line">def render():</span><br><span class="line">    global comment_text</span><br><span class="line">    with open(&apos;jay.csv&apos;, mode=&apos;r&apos;, encoding=&apos;utf-8&apos;) as f:</span><br><span class="line">        rows = f.readlines()</span><br><span class="line">        for row in rows[1:]:</span><br><span class="line">            if row.count(&apos;,&apos;) != 3:</span><br><span class="line">                continue</span><br><span class="line">            elements = row.split(&apos;,&apos;)</span><br><span class="line">            user = elements[0]</span><br><span class="line">            date = elements[1]</span><br><span class="line">            if &apos;2019&apos; not in date:</span><br><span class="line">                continue</span><br><span class="line">            like = elements[2]</span><br><span class="line">            comment = elements[3]</span><br><span class="line">            if &apos;2019-09-14&apos; in date:</span><br><span class="line">                dates.append(&apos;2019-09-14&apos;)</span><br><span class="line">            elif &apos;2019-09-15&apos; in date:</span><br><span class="line">                dates.append(&apos;2019-09-15&apos;)</span><br><span class="line">            elif &apos;2019-09-16 0&apos; in date or &apos;2019-09-16 1&apos; in date or &apos;2019-09-16 20&apos; in date or &apos;2019-09-16 21&apos; in date:</span><br><span class="line">                dates.append(&apos;2019-09-16 0-21&apos;)</span><br><span class="line">            elif &apos;2019-09-18&apos; in date:</span><br><span class="line">                continue</span><br><span class="line">            else:</span><br><span class="line">                dates.append(date)</span><br><span class="line">            comment_text += comment</span><br><span class="line"></span><br><span class="line">    with open(&quot;comment_text.txt&quot;,&quot;w&quot;, encoding=&apos;utf-8&apos;) as f:</span><br><span class="line">        f.write(comment_text)</span><br><span class="line"></span><br><span class="line">    date_data = Counter(dates).most_common()</span><br><span class="line">    # 按日期进行排序</span><br><span class="line">    date_data = sorted(date_data)</span><br><span class="line">    # print(data)</span><br><span class="line"></span><br><span class="line">    # 根据评分数据生成柱状图</span><br><span class="line">    bar = Bar(&apos;评价人数走势图&apos;, &apos;数据来源：QQ音乐网页版&apos;,</span><br><span class="line">              title_pos=&apos;center&apos;, width=800, height=600)</span><br><span class="line">    attr, value = bar.cast(date_data)</span><br><span class="line">    bar.add(&apos;&apos;, attr, value, is_visualmap=False, visual_range=[0, 3500], visual_text_color=&apos;#fff&apos;, is_more_utils=True,</span><br><span class="line">            xaxis_interval=0, xaxis_rotate=30,is_label_show=True,xaxis_label_textsize=8, label_text_size=8)</span><br><span class="line"></span><br><span class="line">    bar.render(</span><br><span class="line">        &apos;picture\评价人数走势图.html&apos;)</span><br><span class="line"></span><br><span class="line">render()</span><br></pre></td></tr></table></figure><p>最后，一起来听一下这首歌吧~</p><blockquote><p><a href="https://y.qq.com/n/yqq/song/001qvvgF38HVc4.html" target="_blank" rel="noopener">土豪通道</a><br><a href="https://cdn.jsdelivr.net/gh/InfiniteYinux/article@master/music/Jack-cry.mp3" target="_blank" rel="noopener">平民通道</a></p></blockquote>]]></content>
    
    <summary type="html">
    
      &lt;center&gt;&lt;font  size = &quot;4&quot; color = &quot;FF0000&quot;  face = &quot;楷体&quot;&gt;用Python来分析一波周董新曲《说好不哭》为何如此火爆！&lt;/font&gt;&lt;/center&gt;
    
    </summary>
    
    
      <category term="Python" scheme="http://www.codingpy.cn/categories/Python/"/>
    
    
      <category term="Python" scheme="http://www.codingpy.cn/tags/Python/"/>
    
      <category term="爬虫" scheme="http://www.codingpy.cn/tags/%E7%88%AC%E8%99%AB/"/>
    
      <category term="数据分析" scheme="http://www.codingpy.cn/tags/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/"/>
    
  </entry>
  
  <entry>
    <title>Windows(10)环境下搭建JSP开发环境</title>
    <link href="http://www.codingpy.cn/2019/09/04/JSP_init/"/>
    <id>http://www.codingpy.cn/2019/09/04/JSP_init/</id>
    <published>2019-09-04T00:30:00.000Z</published>
    <updated>2019-09-20T14:18:35.706Z</updated>
    
    <content type="html"><![CDATA[<p>JSP是Java Server Page的缩写，是由Sun Microsystems公司主导创建的一种动态网页技术标准。JSP部署于网络服务器上，可以响应客户端发送的请求，并根据请求内容动态地生成HTML、XML或其他格式文档的Web网页，然后返回给请求者。JSP技术以Java语言作为脚本语言，为用户的HTTP请求提供服务，并能与服务器上的其它Java程序共同处理复杂的业务需求。目前，JSP已经成为开发动态网站的主流技术。</p><a id="more"></a><h1 id="安装配置JSP运行环境"><a href="#安装配置JSP运行环境" class="headerlink" title="安装配置JSP运行环境"></a>安装配置JSP运行环境</h1><h2 id="一、-安装配置JDK"><a href="#一、-安装配置JDK" class="headerlink" title="一、  安装配置JDK"></a>一、  安装配置JDK</h2><p>进入<a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="noopener">JDK官网</a>选择Java SE Development Kit 8u172，根据自己的电脑选择32位或者64位进行下载。<br><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/jspone/output_1.png" alt="image.png"></fancybox><br>具体配置教程参考<a href="https://blog.csdn.net/write6/article/details/79136388" target="_blank" rel="noopener">《JDK 安装 Java环境变量配置 详细教程》</a></p><h2 id="二、-安装配置Tomcat"><a href="#二、-安装配置Tomcat" class="headerlink" title="二、  安装配置Tomcat"></a>二、  安装配置Tomcat</h2><p>1、进入<a href="http://tomcat.apache.org/" target="_blank" rel="noopener">Tomcat官网</a>安装下载,这里演示安装下载的名称是“apache-tomcat-9.0.24.exe”。<br>2、下载完毕后，就可以在需要编译和运行Java程序的计算机安装Tomcat服务器，具体步骤如下：<br>（1）   双击“apache-tomcat-9.0.24.exe”文件开始安装。在弹出的安装向导对话框中，单击“Next”按钮，将弹出如下图所示的“许可协议”对话框。<fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/jspone/output_2.png" alt="image.png"></fancybox><br>一直next就行</p><p>（2）   这里采用默认的组件安装，如果不懂就按默认的设置。<br><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/jspone/output_3.png" alt="image.png"></fancybox></p><p>（3）   这里是Tomcat默认的端口号，不喜欢这个可以自己设置成别的，但是千万别与系统端口号重复！<br><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/jspone/output_4.png" alt="image.png"></fancybox><br>（4）接下来就一直next就行，路径默认就行。</p><h2 id="三、-Tomcat环境变量Catalina-Home配置"><a href="#三、-Tomcat环境变量Catalina-Home配置" class="headerlink" title="三、 Tomcat环境变量Catalina_Home配置"></a>三、 Tomcat环境变量Catalina_Home配置</h2><p>1、CATALINA_HOME是TOMCAT安装路径的别名，目的是为了方便使用TOMCAT</p><p>2、计算机&gt;属性&gt;环境变量, 新建环境变量。变量名为CATALINA_HOME ,变量值tomcat的解压目录，我电脑上的为：“D:\Function\Apache Software Foundation\Tomcat 9.0”，注意后面不用多加“\”或者“;”<br><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/jspone/output_5.png" alt="image.png"></fancybox></p><p>3、在环境变量Path中，新增加“%CATALINA_HOME%\bin\”<br>4、打开你放置刚才下载的Tomcat的bin目录，找到“startup.bat”文件双击，然后就会弹出一个DOS窗口显示Tomcat启动的进程状态。<br><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/jspone/output_6.png" alt="image.png"></fancybox></p><p><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/jspone/output_7.png" alt="image.png"></fancybox></p><p>5、测试Tomcat是否配置成功：打开浏览器，输入在地址栏中输入：“<a href="http://localhost:8080”" target="_blank" rel="noopener">http://localhost:8080”</a> 运行结果如下图所示即为配置成功！（因为Tomcat已经在运行再次打开会报错）<br><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/jspone/output_8.png" alt="image.png"></fancybox><br>6、关闭tomcat:进入命令行cmd，输入shutdown.bat</p><h2 id="四、Eclipse的安装配置"><a href="#四、Eclipse的安装配置" class="headerlink" title="四、Eclipse的安装配置"></a>四、Eclipse的安装配置</h2><p>1、进入<a href="https://www.eclipse.org/" target="_blank" rel="noopener">eclipse官网</a>下载eclipse-inst-win64.exe<br><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/jspone/output_9.png" alt="image.png"></fancybox></p><p>根据自己的系统版本选择镜像下载<br><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/jspone/output_10.png" alt="image.png"></fancybox><br>选择国内镜像下载</p><p>2、运行eclipse-inst-win64.exe<br><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/jspone/output_11.png" alt="image.png"></fancybox></p><p>选择第一个<br><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/jspone/output_12.png" alt="image.png"></fancybox><br>选择Java目录和eclipse安装目录，然后点击install</p><p>3、安装完成后打开eclipse<br><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/jspone/output_13.png" alt="image.png"></fancybox><br>如果新建项目中没有Web选项，这时候就需要我们自己去添加web插件</p><p>4、添加Web插件：依次点击【Help】-&gt;【Install New Software】，在【work with】下拉框中选择自己的eclipse版本<br><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/jspone/output_14.png" alt="image.png"></fancybox><br>在下面的下拉框中勾选 Web, XML, Java EE and OSGi Enterprise Development；</p><p>然后点击next，耐心等待下载<br><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/jspone/output_15.png" alt="image.png"></fancybox><br>在这一步的时候点击同意，然后点击finish</p><p>安装这几个插件，耐心等待……..安装完成之后，会自动弹出对话框让你重启eclipse，重启下就行，此时，就可以新建web项目了<br><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/jspone/output_16.png" alt="image.png"></fancybox></p><h2 id="五、新建jsp文件"><a href="#五、新建jsp文件" class="headerlink" title="五、新建jsp文件"></a>五、新建jsp文件</h2><p>1、新建jsp文件：依次点击【File】-&gt;【New】-&gt;【Project】；在弹出的列表中点击Web，选择 【Dynamic Web Project】<br><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/jspone/output_17.png" alt="image.png"></fancybox></p><p>然后点击【Next】输入项目名，然后点击【Finish】<br><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/jspone/output_18.png" alt="image.png"></fancybox></p><p>然后打开创建的项目，选择【WebContent】右键新建【JSP File】<br><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/jspone/output_19.png" alt="image.png"></fancybox></p><p>新建的文件报错<br><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/jspone/output_20.png" alt="image.png"></fancybox></p><p>右键点击项目—&gt;【Build Path】—&gt;【Configure Build Path】<br>点击【libraries】-&gt;【Add Library】-&gt;【Server Runtime】-&gt;【Next】-&gt;【Finish】-&gt;【Apply and Close】<br><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/jspone/output_21.png" alt="image.png"></fancybox></p><p>接下来更改编码：导航栏点击【Windows】-&gt;【Preference】-&gt;【JSP File】 Encoding选择“UTF-8”，然后点击应用并关闭<br><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/jspone/output_22.png" alt="image.png"></fancybox></p><p>接下来添加Tomcat：点击【Server】，再点击蓝色字体，在弹出的列表框中点击【Apache】，选择你安装的Tomcat，这里我安装的是【Tomcat v9.0.24】，然后点击next<br><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/jspone/output_23.png" alt="image.png"></fancybox></p><p>在这里需要选择安装的Tomcat的文件路径，填好后点击Next<br><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/jspone/output_24.png" alt="image.png"></fancybox></p><p>点击创建的项目名即可添加到配置中，然后点击Finish<br><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/jspone/output_25.png" alt="image.png"></fancybox></p><p>接下来就可以创建一个简单的JSP实例来测试拉；<br><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/jspone/output_26.png" alt="image.png"></fancybox></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; import=&quot;java.util.*&quot; contentType=&quot;text/html; charset=UTF-8&quot;%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">String path = request.getContextPath();</span><br><span class="line">String basePath = request.getScheme()+&quot;://&quot;+request.getServerName()+&quot;:&quot;+request.getServerPort()+path+&quot;/&quot;;</span><br><span class="line">%&gt;</span><br><span class="line"> </span><br><span class="line">&lt;%</span><br><span class="line">//计算1-100之间的和,并输出 到客户端浏览器中 </span><br><span class="line">int sum=0;</span><br><span class="line">for(int i=1;i&lt;=100;i++)</span><br><span class="line">sum+=i;</span><br><span class="line">out.print(&quot;1-100的和为：&quot;+sum+&quot;\n&quot;);</span><br><span class="line"> %&gt;</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;base href=&quot;&lt;%=basePath%&gt;&quot;&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;title&gt;My JSP &apos;GreetingJsp.jsp&apos; starting page&lt;/title&gt;</span><br><span class="line">    </span><br><span class="line">&lt;meta http-equiv=&quot;pragma&quot; content=&quot;no-cache&quot;&gt;</span><br><span class="line">&lt;meta http-equiv=&quot;cache-control&quot; content=&quot;no-cache&quot;&gt;</span><br><span class="line">&lt;meta http-equiv=&quot;expires&quot; content=&quot;0&quot;&gt;    </span><br><span class="line">&lt;meta http-equiv=&quot;keywords&quot; content=&quot;keyword1,keyword2,keyword3&quot;&gt;</span><br><span class="line">&lt;meta http-equiv=&quot;description&quot; content=&quot;This is my page&quot;&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">&lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;styles.css&quot;&gt;</span><br><span class="line">--&gt;</span><br><span class="line"> </span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;br&gt;这是我的第一个JSP页面 &lt;br&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;table&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">     &lt;td&gt;7&lt;/td&gt;</span><br><span class="line">     &lt;td&gt;8&lt;/td&gt;</span><br><span class="line">     &lt;td&gt;9&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">     &lt;td&gt;4&lt;/td&gt;</span><br><span class="line">     &lt;td&gt;5&lt;/td&gt;</span><br><span class="line">     &lt;td&gt;6&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">    &lt;tr&gt;</span><br><span class="line">     &lt;td&gt;1&lt;/td&gt;</span><br><span class="line">     &lt;td&gt;2&lt;/td&gt;</span><br><span class="line">     &lt;td&gt;3&lt;/td&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">    &lt;/table&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>右键【Run As】-&gt;【Run on Server】<br><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/jspone/output_27.png" alt="image.png"></fancybox><br>运行成功！一个简单的JSP页面就生成啦</p><p>复制蓝色背景内的链接，打开浏览器即可预览啦<br><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/jspone/output_28.png" alt="image.png"></fancybox></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;JSP是Java Server Page的缩写，是由Sun Microsystems公司主导创建的一种动态网页技术标准。JSP部署于网络服务器上，可以响应客户端发送的请求，并根据请求内容动态地生成HTML、XML或其他格式文档的Web网页，然后返回给请求者。JSP技术以Java语言作为脚本语言，为用户的HTTP请求提供服务，并能与服务器上的其它Java程序共同处理复杂的业务需求。目前，JSP已经成为开发动态网站的主流技术。&lt;/p&gt;
    
    </summary>
    
    
      <category term="JSP" scheme="http://www.codingpy.cn/categories/JSP/"/>
    
    
      <category term="JSP" scheme="http://www.codingpy.cn/tags/JSP/"/>
    
      <category term="JSP实用教程" scheme="http://www.codingpy.cn/tags/JSP%E5%AE%9E%E7%94%A8%E6%95%99%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>matplotlib - Pyplot 教程</title>
    <link href="http://www.codingpy.cn/2019/08/08/matplotlib-%20Pyplot%20/"/>
    <id>http://www.codingpy.cn/2019/08/08/matplotlib- Pyplot /</id>
    <published>2019-08-08T00:30:00.000Z</published>
    <updated>2019-08-12T00:30:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>提供类似MATLAB的绘图框架。<br><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/matplotlibPyplot/fengmian.png" alt="png"></p><a id="more"></a><h1 id="Pyplot-教程"><a href="#Pyplot-教程" class="headerlink" title="Pyplot 教程"></a>Pyplot 教程</h1><p>关于pylot接口的介绍。</p><h2 id="pyplot-简介"><a href="#pyplot-简介" class="headerlink" title="pyplot 简介"></a>pyplot 简介</h2><p><a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.html#module-matplotlib.pyplot" target="_blank" rel="noopener">matplotlib.pyplot</a> 是命令样式函数的集合，使matplotlib像MATLAB一样工作。 每个pyplot函数对图形进行一些更改：例如，创建图形，在图形中创建绘图区域，在绘图区域中绘制一些线条，用标签装饰图形等。</p><p>在<a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.html#module-matplotlib.pyplot" target="_blank" rel="noopener">matplotlib.pyplot</a>中，各种状态在函数调用中保留，以便跟踪当前图形和绘图区域等内容，并且绘图函数指向当前轴（请注意“轴”在此处以及在大多数位置 文档是指<a href="https://matplotlib.org/tutorials/introductory/usage.html#figure-parts" target="_blank" rel="noopener">图形的轴部分</a>，而不是多个轴的严格数学术语。</p><p>注意: pyplot API通常不如面向对象的API灵活。您在此处看到的大多数函数调用也可以作为Axes对象中的方法调用。 我们建议您浏览教程和示例以了解其工作原理。</p><p>使用pyplot生成可视化非常快速：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">plt.plot([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])</span><br><span class="line">plt.ylabel(<span class="string">'some numbers'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><pre><code>&lt;Figure size 640x480 with 1 Axes&gt;</code></pre><p>您可能想知道为什么x轴的范围是0-3，y轴的范围是1-4。如果为<a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.plot.html#matplotlib.pyplot.plot" target="_blank" rel="noopener">plot()</a>命令提供单个列表或数组，则matplotlib假定它是一系列y值，并自动为您生成x值。由于python范围以0开头，因此默认的x向量与y具有相同的长度，但从0开始。因此x数据为 [0,1,2,3]。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.plot([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], [<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>])</span><br></pre></td></tr></table></figure><pre><code>[&lt;matplotlib.lines.Line2D at 0x1de069a2a20&gt;]</code></pre><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/matplotlibPyplot/output_3_1.png" alt="png"></p><h2 id="格式化绘图的样式"><a href="#格式化绘图的样式" class="headerlink" title="格式化绘图的样式"></a>格式化绘图的样式</h2><p>对于每对x，y对的参数，有一个可选的第三个参数，它是指示绘图的颜色和线型的格式字符串。格式字符串的字母和符号来自MATLAB，您可以将颜色字符串与线型字符串连接起来。默认格式字符串为“b-”，为蓝色实线。例如，要用红色圆圈绘制上述内容，您将发出：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#plt.plot(x,y,format_string,**kwargs) </span></span><br><span class="line"><span class="comment">#x轴数据，y轴数据，format_string控制曲线的格式字串 </span></span><br><span class="line"><span class="comment">#format_string 由颜色字符，风格字符，和标记字符 </span></span><br><span class="line"></span><br><span class="line">plt.plot([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>], [<span class="number">1</span>, <span class="number">4</span>, <span class="number">9</span>, <span class="number">16</span>], <span class="string">'ro'</span>)</span><br><span class="line">plt.axis([<span class="number">0</span>, <span class="number">6</span>, <span class="number">0</span>, <span class="number">20</span>])</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/matplotlibPyplot/output_5_0.png" alt="png"></p><p>有关线型和格式字符串的完整列表，请参阅 <a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.plot.html#matplotlib.pyplot.plot" target="_blank" rel="noopener">plot()</a> 文档。 上例中的 <a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.axis.html#matplotlib.pyplot.axis" target="_blank" rel="noopener">axis()</a> 命令采用 [xmin, xmax, ymin, ymax] 列表并指定轴的视口。</p><p>如果matplotlib仅限于使用列表，那么数字处理将毫无用处。通常，您将使用numpy数组。实际上，所有序列都在内部转换为numpy数组。 下面的示例说明了使用数组在一个命令中绘制具有不同格式样式的多行。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># 每隔200ms均匀采样一次</span></span><br><span class="line">t = np.arange(<span class="number">0.</span>, <span class="number">5.</span>, <span class="number">0.2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 红色的破折号，蓝色的正方形和绿色的三角形</span></span><br><span class="line">plt.plot(t, t, <span class="string">'r--'</span>, t, t**<span class="number">2</span>, <span class="string">'bs'</span>, t, t**<span class="number">3</span>, <span class="string">'g^'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/matplotlibPyplot/output_7_0.png" alt="png"></p><h2 id="使用关键字字符串绘图"><a href="#使用关键字字符串绘图" class="headerlink" title="使用关键字字符串绘图"></a>使用关键字字符串绘图</h2><p>在某些情况下，您可以使用允许您使用字符串访问特定变量的格式的数据。例如，使用 <a href="https://docs.scipy.org/doc/numpy/reference/generated/numpy.recarray.html#numpy.recarray" target="_blank" rel="noopener">numpy.recarray</a> 或<a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.html#pandas.DataFrame" target="_blank" rel="noopener">pandas.DataFrame</a>。</p><p>Matplotlib允许您使用data关键字参数提供此类对象。如果提供，那么您可以生成包含与这些变量对应的字符串的图。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">matplotlib.pyplot.scatter(x, y, s=None, c=None, marker=None, cmap=None, norm=None, vmin=None, vmax=None, alpha=None, linewidths=None, verts=None, edgecolors=None, *, data=None, **kwargs)</span><br></pre></td></tr></table></figure><p>x，y：表示的是大小为(n,)的数组，也就是我们即将绘制散点图的数据点<br>s:是一个实数或者是一个数组大小为(n,)，这个是一个可选的参数。<br>c:表示的是颜色，也是一个可选项。默认是蓝色’b’,表示的是标记的颜色，或者可以是一个表示颜色的字符，或者是一个长度为n的表示颜色的序列等等，感觉还没用到过现在不解释了。但是c不可以是一个单独的RGB数字，也不可以是一个RGBA的序列。可以是他们的2维数组（只有一行）。<br>marker:表示的是标记的样式，默认的是’o’。<br>cmap:Colormap实体或者是一个colormap的名字，cmap仅仅当c是一个浮点数数组的时候才使用。如果没有申明就是image.cmap<br>norm:Normalize实体来将数据亮度转化到0-1之间，也是只有c是一个浮点数的数组的时候才使用。如果没有申明，就是默认为colors.Normalize。<br>vmin,vmax:实数，当norm存在的时候忽略。用来进行亮度数据的归一化。<br>alpha：实数，0-1之间。<br>linewidths:也就是标记点的长度。    </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">data = &#123;<span class="string">'a'</span>: np.arange(<span class="number">50</span>),</span><br><span class="line">        <span class="string">'c'</span>: np.random.randint(<span class="number">0</span>, <span class="number">50</span>, <span class="number">50</span>),</span><br><span class="line">        <span class="string">'d'</span>: np.random.randn(<span class="number">50</span>)&#125;</span><br><span class="line">data[<span class="string">'b'</span>] = data[<span class="string">'a'</span>] + <span class="number">10</span> * np.random.randn(<span class="number">50</span>)</span><br><span class="line">data[<span class="string">'d'</span>] = np.abs(data[<span class="string">'d'</span>]) * <span class="number">100</span></span><br><span class="line"></span><br><span class="line">plt.scatter(<span class="string">'a'</span>, <span class="string">'b'</span>, c=<span class="string">'c'</span>, s=<span class="string">'d'</span>, data=data)</span><br><span class="line">plt.xlabel(<span class="string">'entry a'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'entry b'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/matplotlibPyplot/output_10_0.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">data = &#123;<span class="string">'a'</span>: np.arange(<span class="number">50</span>),</span><br><span class="line">        <span class="string">'c'</span>: np.random.randint(<span class="number">0</span>, <span class="number">50</span>, <span class="number">50</span>),</span><br><span class="line">        <span class="string">'d'</span>: np.random.randn(<span class="number">50</span>)&#125;</span><br><span class="line">print(data)</span><br><span class="line">data[<span class="string">'b'</span>] = data[<span class="string">'a'</span>] + <span class="number">10</span> * np.random.randn(<span class="number">50</span>)</span><br><span class="line">data[<span class="string">'d'</span>] = np.abs(data[<span class="string">'d'</span>]) * <span class="number">100</span></span><br><span class="line">print(data)</span><br></pre></td></tr></table></figure><pre><code>{&apos;a&apos;: array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16,       17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33,       34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49]), &apos;c&apos;: array([47,  5, 29, 21, 15, 12, 29, 23, 10, 25, 26, 45, 32, 30, 37, 27, 43,        9, 26, 45, 48, 14, 23, 30, 22,  0,  5, 47, 21, 26, 35,  7,  2, 19,       24, 41, 26,  9, 20, 16, 15, 29, 23,  4, 21, 12, 23, 30, 41, 19]), &apos;d&apos;: array([ 0.91474741,  1.4102975 , -0.09708013, -1.47629846, -1.57769092,       -0.46290149,  1.23430367,  0.38467709, -0.01272562, -1.44240598,       -0.21927709, -0.30498565, -0.11862153, -1.24972745, -1.32424128,       -1.5610827 ,  1.26963903,  0.62084676, -1.0549506 ,  0.37044246,       -0.39299613,  0.42897231, -0.33461671, -0.86706857, -0.76486767,       -1.3074562 , -0.33973554, -1.08680383,  0.27878669,  1.0599157 ,       -0.38176051,  0.79680669, -0.6874751 ,  1.38240815, -0.1344723 ,        0.7627456 ,  0.36115735,  0.83799247,  0.02523584,  0.81839594,       -0.77025921, -0.06682006,  0.06934268,  0.36251595, -0.99875799,        1.23386736, -0.32016664,  0.45225071,  0.55994446,  0.47643056])}{&apos;a&apos;: array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14, 15, 16,       17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33,       34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49]), &apos;c&apos;: array([47,  5, 29, 21, 15, 12, 29, 23, 10, 25, 26, 45, 32, 30, 37, 27, 43,        9, 26, 45, 48, 14, 23, 30, 22,  0,  5, 47, 21, 26, 35,  7,  2, 19,       24, 41, 26,  9, 20, 16, 15, 29, 23,  4, 21, 12, 23, 30, 41, 19]), &apos;d&apos;: array([ 91.4747409 , 141.02975036,   9.70801323, 147.6298458 ,       157.76909222,  46.29014854, 123.43036704,  38.46770907,         1.27256168, 144.24059782,  21.92770893,  30.49856537,        11.86215303, 124.972745  , 132.42412769, 156.10827022,       126.96390267,  62.0846764 , 105.49506   ,  37.0442464 ,        39.29961326,  42.89723069,  33.46167088,  86.70685708,        76.48676738, 130.74561997,  33.97355351, 108.68038257,        27.87866927, 105.9915699 ,  38.17605117,  79.68066907,        68.74750955, 138.2408153 ,  13.44723023,  76.27455996,        36.1157352 ,  83.79924741,   2.52358383,  81.83959391,        77.02592105,   6.68200567,   6.93426756,  36.25159505,        99.87579944, 123.38673588,  32.01666378,  45.22507109,        55.99444581,  47.6430561 ]), &apos;b&apos;: array([  4.62276015,   7.74528096,  -4.77823695, -11.7847356 ,        18.05816585,  -8.1731315 ,   4.98414606,  18.1539417 ,        11.06732176,  15.32465307,   5.923213  ,   6.77520583,        -8.72986134,  19.414693  ,  22.05933889,  10.92443259,        16.1005237 ,  28.55305548,   7.16710341,  19.82975597,        35.25631478,  13.32137703,   9.26598849,  14.25528353,        17.70779422,  18.62234998,  41.83152657,  26.02409203,        23.25997035,  20.38161932,   2.84095495,  36.00225335,        46.69340509,  22.75167791,  34.33249818,  25.09595488,        41.37140253,  16.54690243,  32.4532621 ,  31.12442736,        40.99257063,  49.49197597,  55.91868808,  55.13338215,        33.1365961 ,  48.95821962,  25.50538193,  58.72572039,        49.63841177,  41.7925894 ])}</code></pre><h2 id="用分类变量绘图"><a href="#用分类变量绘图" class="headerlink" title="用分类变量绘图"></a>用分类变量绘图</h2><p>也可以使用分类变量创建绘图。Matplotlib允许您将分类变量直接传递给许多绘图函数。例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">names = [<span class="string">'group_a'</span>, <span class="string">'group_b'</span>, <span class="string">'group_c'</span>]</span><br><span class="line">values = [<span class="number">1</span>, <span class="number">10</span>, <span class="number">100</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 表示figure 的大小为宽、长（单位为inch）</span></span><br><span class="line">plt.figure(<span class="number">1</span>, figsize=(<span class="number">18</span>, <span class="number">6</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># plt.subplot(ABC)表示第A行,B图形的总数量，C第几个图形</span></span><br><span class="line">plt.subplot(<span class="number">131</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 直方图</span></span><br><span class="line">plt.bar(names, values)</span><br><span class="line">plt.subplot(<span class="number">132</span>)</span><br><span class="line"><span class="comment">#散点图</span></span><br><span class="line">plt.scatter(names, values)</span><br><span class="line">plt.subplot(<span class="number">133</span>)</span><br><span class="line"><span class="comment">#折线图</span></span><br><span class="line">plt.plot(names, values)</span><br><span class="line">plt.suptitle(<span class="string">'Categorical Plotting'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/matplotlibPyplot/output_13_0.png" alt="png"></p><h2 id="控制线的属性"><a href="#控制线的属性" class="headerlink" title="控制线的属性"></a>控制线的属性</h2><p>线可以设置许多属性：linewidth，dash style，antialiased等; 请参阅 <a href="https://matplotlib.org/api/_as_gen/matplotlib.lines.Line2D.html#matplotlib.lines.Line2D" target="_blank" rel="noopener">matplotlib.lines.Line2D</a>。 有几种方法可以设置线属性。</p><p>使用关键字args：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.plot(x, y, linewidth=2.0)</span><br></pre></td></tr></table></figure><p>使用Line2D实例的setter方法。 plot返回Line2D对象列表; 例如，line1，line2 = plot（x1，y1，x2，y2）。 在下面的代码中，我们假设我们只有一行，因此返回的列表的长度为1.我们使用tuple解压缩为line，以获取该列表的第一个元素：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">line, = plt.plot(x, y, &apos;-&apos;)</span><br><span class="line">line.set_antialiased(False) # turn off antialising</span><br></pre></td></tr></table></figure><p>使用 <a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.setp.html#matplotlib.pyplot.setp" target="_blank" rel="noopener">setp()</a> 命令。 下面的示例使用MATLAB样式命令在行列表上设置多个属性。setp透明地使用对象列表或单个对象。您可以使用python关键字参数或MATLAB样式的字符串/值对：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">lines = plt.plot(x1, y1, x2, y2)</span><br><span class="line"># use keyword args</span><br><span class="line">plt.setp(lines, color=&apos;r&apos;, linewidth=2.0)</span><br><span class="line"># or MATLAB style string value pairs</span><br><span class="line">plt.setp(lines, &apos;color&apos;, &apos;r&apos;, &apos;linewidth&apos;, 2.0)</span><br></pre></td></tr></table></figure><p>以下是可用的<a href="https://matplotlib.org/api/_as_gen/matplotlib.lines.Line2D.html#matplotlib.lines.Line2D" target="_blank" rel="noopener">Line2D</a>属性。</p><table align="center">    <thead>        <tr>            <th>属性</th>            <th>值类型</th>        </tr>    </thead>    <tbody>        <tr>            <th>alpha</th>            <th>float</th>        </tr>        <tr>            <th>animated</th>            <th>[True | False]</th>        </tr>        <tr>            <th>antialiased 或 aa</th>            <th>[True | False]</th>        </tr>        <tr>            <th>clip_box</th>            <th>matplotlib.transform.Bbox实例</th>        </tr>        <tr>            <th>clip_on</th>            <th>[True | False]</th>        </tr>        <tr>            <th>clip_path</th>            <th>路径实例和变换实例(修补程序)</th>        </tr>        <tr>            <th>color 或 c</th>            <th>任何Matplotlib颜色</th>        </tr>        <tr>            <th>contains</th>            <th>the hit testing function</th>        </tr>        <tr>            <th>dash_capstyle</th>            <th>['butt' | 'round' | 'projecting']</th>        </tr>        <tr>            <th>dash_joinstyle</th>            <th>['miter' | 'round' | 'bevel']</th>        </tr>        <tr>            <th>dashes</th>            <th>以点为单位的开/关油墨顺序</th>        </tr>        <tr>            <th>data</th>            <th>(np.array xdata, np.array ydata)</th>        </tr>        <tr>            <th>figure</th>            <th>matplotlib.quire.Figure实例</th>        </tr>        <tr>            <th>label</th>            <th>任何字符串</th>        </tr>        <tr>            <th>linestyle or ls</th>            <th>[ '-' | '--' | '-.' | ':' | 'steps' | ...]</th>        </tr>        <tr>            <th>linewidth or lw</th>            <th>浮点值</th>        </tr>        <tr>            <th>lod</th>            <th>[True | False]</th>        </tr>        <tr>            <th>marker</th>            <th>[ '+' | ',' | '.' | '1' | '2' | '3' | '4' ]</th>        </tr>        <tr>            <th>markeredgecolor or mec</th>            <th>任何Matplotlib颜色</th>        </tr>        <tr>            <th>markeredgewidth or mew</th>            <th>浮点值</th>        </tr>        <tr>            <th>markerfacecolor or mfc</th>            <th>任何Matplotlib颜色</th>        </tr>        <tr>            <th>markersize or ms</th>            <th>浮点数</th>        </tr>        <tr>            <th>markevery</th>            <th>[ None | integer | (startind, stride) ]</th>        </tr>        <tr>            <th>picker</th>            <th>用于交互式选线</th>        </tr>        <tr>            <th>pickradius</th>            <th>线拾取选择半径</th>        </tr>        <tr>            <th>solid_capstyle</th>            <th>['butt' | 'round' | 'projecting']</th>        </tr>        <tr>            <th>solid_joinstyle</th>            <th>['miter' | 'round' | 'bevel']</th>        </tr>        <tr>            <th>transform</th>            <th>matplotlib.transforms.Transform实例</th>        </tr>        <tr>            <th>visible</th>            <th>[True | False]</th>        </tr>        <tr>            <th>xdata</th>            <th>np.array</th>        </tr>        <tr>            <th>ydata</th>            <th>np.array</th>        </tr>        <tr>            <th>zorder</th>            <th>任意数字</th>        </tr>    </tbody></table><p>若要获取可设置行属性的列表，请使用一行或多行作为参数调用<a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.setp.html#matplotlib.pyplot.setp" target="_blank" rel="noopener">setp()</a> 函数。</p><h2 id="使用多个图形和轴"><a href="#使用多个图形和轴" class="headerlink" title="使用多个图形和轴"></a>使用多个图形和轴</h2><p>MATLAB和<a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.html#module-matplotlib.pyplot" target="_blank" rel="noopener">pyplot</a>，都有当前图形和当前轴的概念。所有打印命令都适用于当前轴。函数gca() 返回当前轴(<a href="https://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes" target="_blank" rel="noopener">matplotlib.axes.Axes</a>实例)，<a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.gcf.html#matplotlib.pyplot.gcf" target="_blank" rel="noopener">gcf()</a> 返回当前地物(<a href="https://matplotlib.org/api/_as_gen/matplotlib.figure.Figure.html#matplotlib.figure.Figure" target="_blank" rel="noopener">matplotlib.figure.Figure</a>实例)。通常情况下，你不必担心这一点，因为这一切都是在幕后处理的。下面是创建两个子图的脚本。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">f</span><span class="params">(t)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> np.exp(-t) * np.cos(<span class="number">2</span>*np.pi*t)</span><br><span class="line"></span><br><span class="line">t1 = np.arange(<span class="number">0.0</span>, <span class="number">5.0</span>, <span class="number">0.1</span>)</span><br><span class="line">t2 = np.arange(<span class="number">0.0</span>, <span class="number">5.0</span>, <span class="number">0.02</span>)</span><br><span class="line"></span><br><span class="line">plt.figure(<span class="number">1</span>)</span><br><span class="line">plt.subplot(<span class="number">211</span>)</span><br><span class="line">plt.plot(t1, f(t1), <span class="string">'bo'</span>, t2, f(t2), <span class="string">'k'</span>)</span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">212</span>)</span><br><span class="line">plt.plot(t2, np.cos(<span class="number">2</span>*np.pi*t2), <span class="string">'r--'</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/matplotlibPyplot/output_16_0.png" alt="png"></p><p>这里的 <a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.figure.html#matplotlib.pyplot.figure" target="_blank" rel="noopener">figure()</a> 命令是可选的，因为默认情况下将创建 figure(1)，就像默认情况下创建 subplot(111) 一样，如果不手动指定任何轴。<a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.subplot.html#matplotlib.pyplot.subplot" target="_blank" rel="noopener">subplot()</a>命令指定numrows, numcols, plot_number，其中 plot_number 的范围 从1到numrows*numcols。如果 numrows * numcols &lt;10，则subplot命令中的逗号是可选的。因此 subplot(211) 与 subplot(2, 1, 1) 相同。</p><p>您可以创建任意数量的子图和轴。如果要手动放置轴，即不在矩形网格上，请使用 axes() 命令，该命令允许您将位置指定为axes([left，bottom，width，height])，其中所有值均为小数（0到1）坐标。有关手动放置轴的示例，请参阅<a href="https://matplotlib.org/gallery/subplots_axes_and_figures/axes_demo.html" target="_blank" rel="noopener">Axes Demo</a>;有关具有大量子图的示例，请参阅 <a href="https://matplotlib.org/gallery/subplots_axes_and_figures/subplot_demo.html" target="_blank" rel="noopener">Basic Subplot Demo</a>。</p><p>您可以使用具有增加的图号的多个<a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.figure.html#matplotlib.pyplot.figure" target="_blank" rel="noopener">figure()</a> 调用来创建多个数字。当然，每个图形可以包含您心中所需的轴和子图：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">plt.figure(<span class="number">1</span>)                <span class="comment"># the first figure</span></span><br><span class="line">plt.subplot(<span class="number">211</span>)             <span class="comment"># the first subplot in the first figure</span></span><br><span class="line">plt.plot([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">plt.subplot(<span class="number">212</span>)             <span class="comment"># the second subplot in the first figure</span></span><br><span class="line">plt.plot([<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">plt.figure(<span class="number">2</span>)                <span class="comment"># a second figure</span></span><br><span class="line">plt.plot([<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>])          <span class="comment"># creates a subplot(111) by default</span></span><br><span class="line"></span><br><span class="line">plt.figure(<span class="number">1</span>)                <span class="comment"># figure 1 current; subplot(212) still current</span></span><br><span class="line">plt.subplot(<span class="number">211</span>)             <span class="comment"># make subplot(211) in figure1 current</span></span><br><span class="line">plt.title(<span class="string">'Easy as 1, 2, 3'</span>) <span class="comment"># subplot 211 title</span></span><br></pre></td></tr></table></figure><pre><code>Text(0.5, 1.0, &apos;Easy as 1, 2, 3&apos;)</code></pre><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/matplotlibPyplot/output_18_1.png" alt="png"></p><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/matplotlibPyplot/output_18_2.png" alt="png"></p><p>您可以使用 <a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.clf.html#matplotlib.pyplot.clf" target="_blank" rel="noopener">clf()</a> 清除当前图形，使用 <a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.cla.html#matplotlib.pyplot.cla" target="_blank" rel="noopener">cla()</a> 清除当前轴。如果您发现在幕后为您维护状态（特别是当前图像，图形和轴）很烦人，请不要绝望：这只是围绕面向对象API的瘦状态包装器，您可以使用它（见<a href="https://matplotlib.org/tutorials/intermediate/artists.html" target="_blank" rel="noopener">Artist tutorial</a>）</p><p>如果你要制作大量的图像，你还需要注意一件事：在用 <a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.close.html#matplotlib.pyplot.close" target="_blank" rel="noopener">close()</a> 显式关闭数字之前，数字所需的内存不会完全释放。删除对图的所有引用，和/或使用窗口管理器来杀死屏幕上出现图形的窗口是不够的，因为pyplot会保持内部引用，直到调用close()。</p><h2 id="使用文本"><a href="#使用文本" class="headerlink" title="使用文本"></a>使用文本</h2><p><a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.text.html#matplotlib.pyplot.text" target="_blank" rel="noopener">text()</a> 命令可用于在任意位置添加文本，而<a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.xlabel.html#matplotlib.pyplot.xlabel" target="_blank" rel="noopener">xlabel()</a>, <a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.ylabel.html#matplotlib.pyplot.ylabel" target="_blank" rel="noopener">ylabel()</a> 和 <a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.title.html#matplotlib.pyplot.title" target="_blank" rel="noopener">title()</a> 用于在指定位置添加文本(有关更详细的示例，请参见Matplotlib图中的文本)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mu, sigma = <span class="number">100</span>, <span class="number">15</span></span><br><span class="line">x = mu + sigma * np.random.randn(<span class="number">10000</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># the histogram of the data</span></span><br><span class="line">n, bins, patches = plt.hist(x, <span class="number">50</span>, density=<span class="number">1</span>, facecolor=<span class="string">'g'</span>, alpha=<span class="number">0.75</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">plt.xlabel(<span class="string">'Smarts'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'Probability'</span>)</span><br><span class="line">plt.title(<span class="string">'Histogram of IQ'</span>)</span><br><span class="line">plt.text(<span class="number">60</span>, <span class="number">.025</span>, <span class="string">r'$\mu=100,\ \sigma=15$'</span>)</span><br><span class="line">plt.axis([<span class="number">40</span>, <span class="number">160</span>, <span class="number">0</span>, <span class="number">0.03</span>])</span><br><span class="line">plt.grid(<span class="literal">True</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/matplotlibPyplot/output_20_0.png" alt="png"></p><p>所有<a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.text.html#matplotlib.pyplot.text" target="_blank" rel="noopener">text()</a> 命令都返回一个<a href="https://matplotlib.org/api/text_api.html#matplotlib.text.Text" target="_blank" rel="noopener">matplotlib.text.Text</a>实例。与上面的行一样，您可以通过将关键字参数传递给文本函数或使用<a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.setp.html#matplotlib.pyplot.setp" target="_blank" rel="noopener">setp()</a>来自定义属性：</p><pre><code>t = plt.xlabel(&apos;my data&apos;, fontsize=14, color=&apos;red&apos;)</code></pre><p><a href="https://matplotlib.org/tutorials/text/text_props.html" target="_blank" rel="noopener">文本属性和布局</a>中更详细地介绍了这些属性。</p><h3 id="在文本中使用数学表达式"><a href="#在文本中使用数学表达式" class="headerlink" title="在文本中使用数学表达式"></a>在文本中使用数学表达式</h3><p>matplotlib在任何文本表达式中接受TeX方程表达式。 例如，要在标题中写入表达式σi= 15，您可以编写由美元符号包围的TeX表达式：</p><pre><code>plt.title(r&apos;$\sigma_i=15$&apos;)</code></pre><p>标题字符串前面的r很重要 - 它表示该字符串是一个原始字符串，而不是将反斜杠视为python转义。matplotlib有一个内置的TeX表达式解析器和布局引擎，并提供自己的数学字体 - 有关详细信息，请参阅编写<a href="https://matplotlib.org/tutorials/text/mathtext.html" target="_blank" rel="noopener">数学表达式</a>。因此，您可以跨平台使用数学文本，而无需安装TeX。 对于安装了LaTeX和dvipng的用户，您还可以使用LaTeX格式化文本并将输出直接合并到显示图或保存的postscript中 - 请参阅使用<a href="https://matplotlib.org/tutorials/text/usetex.html" target="_blank" rel="noopener">LaTeX</a>进行文本渲染。</p><h2 id="注释文本"><a href="#注释文本" class="headerlink" title="注释文本"></a>注释文本</h2><p>上面的基本<a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.text.html#matplotlib.pyplot.text" target="_blank" rel="noopener">text()</a> 命令的使用将文本放在Axes上的任意位置。文本的常见用途是注释绘图的某些功能，而<a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.text.html#matplotlib.pyplot.text" target="_blank" rel="noopener">annotate()</a>方法提供帮助功能以使注释变得容易。在注释中，有两点需要考虑：由参数xy表示的注释位置和文本xytext的位置。 这两个参数都是（x，y）元组。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ax = plt.subplot(<span class="number">111</span>)</span><br><span class="line"></span><br><span class="line">t = np.arange(<span class="number">0.0</span>, <span class="number">5.0</span>, <span class="number">0.01</span>)</span><br><span class="line">s = np.cos(<span class="number">2</span>*np.pi*t)</span><br><span class="line">line, = plt.plot(t, s, lw=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">plt.annotate(<span class="string">'local max'</span>, xy=(<span class="number">2</span>, <span class="number">1</span>), xytext=(<span class="number">3</span>, <span class="number">1.5</span>),</span><br><span class="line">             arrowprops=dict(facecolor=<span class="string">'red'</span>, shrink=<span class="number">0.05</span>),</span><br><span class="line">             )</span><br><span class="line"></span><br><span class="line">plt.ylim(<span class="number">-2</span>, <span class="number">2</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/matplotlibPyplot/output_22_0.png" alt="png"></p><p>在此基本示例中，xy（箭头提示）和xytext位置（文本位置）都在数据坐标中。 可以选择各种其他坐标系 - 有关详细信息，请参阅<a href="https://matplotlib.org/tutorials/text/annotations.html#annotations-tutorial" target="_blank" rel="noopener">基本注释</a>和<a href="https://matplotlib.org/tutorials/text/annotations.html#plotting-guide-annotation" target="_blank" rel="noopener">高级注释</a>。更多示例可以在<a href="https://matplotlib.org/gallery/text_labels_and_annotations/annotation_demo.html" target="_blank" rel="noopener">Annotating Plots</a>中找到。</p><h2 id="对数和其他非线性轴"><a href="#对数和其他非线性轴" class="headerlink" title="对数和其他非线性轴"></a>对数和其他非线性轴</h2><p><a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.html#module-matplotlib.pyplot" target="_blank" rel="noopener">matplotlib.pyplot</a> 不仅支持线性轴刻度，还支持对数和logit刻度。 如果数据跨越许多数量级，则通常使用此方法。 更改轴的比例很容易：</p><pre><code>plt.xscale(&apos;log&apos;)</code></pre><p>下面显示了具有相同数据和y轴不同比例的四个图的示例。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> matplotlib.ticker <span class="keyword">import</span> NullFormatter  <span class="comment"># useful for `logit` scale</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Fixing random state for reproducibility</span></span><br><span class="line">np.random.seed(<span class="number">19680801</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># make up some data in the interval ]0, 1[</span></span><br><span class="line">y = np.random.normal(loc=<span class="number">0.5</span>, scale=<span class="number">0.4</span>, size=<span class="number">1000</span>)</span><br><span class="line">y = y[(y &gt; <span class="number">0</span>) &amp; (y &lt; <span class="number">1</span>)]</span><br><span class="line">y.sort()</span><br><span class="line">x = np.arange(len(y))</span><br><span class="line"></span><br><span class="line"><span class="comment"># plot with various axes scales</span></span><br><span class="line">plt.figure(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># linear</span></span><br><span class="line">plt.subplot(<span class="number">221</span>)</span><br><span class="line">plt.plot(x, y)</span><br><span class="line">plt.yscale(<span class="string">'linear'</span>)</span><br><span class="line">plt.title(<span class="string">'linear'</span>)</span><br><span class="line">plt.grid(<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># log</span></span><br><span class="line">plt.subplot(<span class="number">222</span>)</span><br><span class="line">plt.plot(x, y)</span><br><span class="line">plt.yscale(<span class="string">'log'</span>)</span><br><span class="line">plt.title(<span class="string">'log'</span>)</span><br><span class="line">plt.grid(<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 对称 log</span></span><br><span class="line">plt.subplot(<span class="number">223</span>)</span><br><span class="line">plt.plot(x, y - y.mean())</span><br><span class="line">plt.yscale(<span class="string">'symlog'</span>, linthreshy=<span class="number">0.01</span>)</span><br><span class="line">plt.title(<span class="string">'symlog'</span>)</span><br><span class="line">plt.grid(<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># logit</span></span><br><span class="line">plt.subplot(<span class="number">224</span>)</span><br><span class="line">plt.plot(x, y)</span><br><span class="line">plt.yscale(<span class="string">'logit'</span>)</span><br><span class="line">plt.title(<span class="string">'logit'</span>)</span><br><span class="line">plt.grid(<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用“NullFormatter”将y轴上的小标记标签格式化为空字符串，以避免轴上有太多标签。</span></span><br><span class="line">plt.gca().yaxis.set_minor_formatter(NullFormatter())</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调整subplot布局，因为logit 1可能比平常占用更多的空间，这是由于像“1 - 10^&#123;-3&#125;”这样的y-tick标签造成的。</span></span><br><span class="line">plt.subplots_adjust(top=<span class="number">0.92</span>, bottom=<span class="number">0.08</span>, left=<span class="number">0.10</span>, right=<span class="number">0.95</span>, hspace=<span class="number">0.25</span>,</span><br><span class="line">                    wspace=<span class="number">0.35</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/matplotlibPyplot/output_24_0.png" alt="png"></p><p>您也可以添加自己的比例，有关详细信息，请参阅<a href="https://matplotlib.org/devel/add_new_projection.html#adding-new-scales" target="_blank" rel="noopener">开发人员指南</a>以创建比例和转换。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      matplotlib - Pyplot 教程
    
    </summary>
    
    
      <category term="Python" scheme="http://www.codingpy.cn/categories/Python/"/>
    
    
      <category term="Python" scheme="http://www.codingpy.cn/tags/Python/"/>
    
      <category term="matplotlib" scheme="http://www.codingpy.cn/tags/matplotlib/"/>
    
  </entry>
  
  <entry>
    <title>matplotlib - matplotlib 教程</title>
    <link href="http://www.codingpy.cn/2019/08/04/matplotlib_course/"/>
    <id>http://www.codingpy.cn/2019/08/04/matplotlib_course/</id>
    <published>2019-08-04T00:30:00.000Z</published>
    <updated>2019-09-20T14:17:48.058Z</updated>
    
    <content type="html"><![CDATA[<p>Matplotlib 是 Python 的绘图库。 它可与 NumPy 一起使用，提供了一种有效的 MatLab 开源替代方案。<br><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/matplotlibCourse/fengmian.png" alt="png"></p><a id="more"></a><h1 id="Pyplot-教程"><a href="#Pyplot-教程" class="headerlink" title="Pyplot 教程"></a>Pyplot 教程</h1><p>关于pylot接口的介绍。</p><h1 id="matplotlib-教程"><a href="#matplotlib-教程" class="headerlink" title="matplotlib 教程"></a>matplotlib 教程</h1><p>这个图库包含了使用Matplotlib可以做的许多事情的示例。可以点击任何图像，以查看完整的图像和源代码。</p><p>有关更短的示例，请参见<a href="https://matplotlib.org/gallery/index.html" target="_blank" rel="noopener">示例页</a>。你还可以在我们的<a href="https://matplotlib.org/contents.html" target="_blank" rel="noopener">用户指南</a>中找到<a href="https://matplotlib.org/resources/index.html" target="_blank" rel="noopener">外部资源</a>和<a href="https://matplotlib.org/faq/index.html" target="_blank" rel="noopener">常见问题解答</a>。</p><h1 id="matplotlib-入门"><a href="#matplotlib-入门" class="headerlink" title="matplotlib 入门"></a>matplotlib 入门</h1><p>这些教程介绍了使用Matplotlib创建可视化效果的基础知识，以及有效使用该包的一些最佳实践。</p><h2 id="使用指南"><a href="#使用指南" class="headerlink" title="使用指南"></a>使用指南</h2><p>本教程介绍一些基本的使用模式和最佳实践，以帮助您开始使用Matplotlib。</p><h3 id="一般概念"><a href="#一般概念" class="headerlink" title="一般概念"></a>一般概念</h3><p>matplotlib有一个广泛的代码库，对于许多新用户来说，这个代码库可能会让人望而生畏。然而，大多数Matplotlib可以用相当简单的概念框架和几个要点的知识来理解。</p><p>打印需要在一系列级别上执行操作，从最一般的级别(例如“轮廓此二维阵列”)到最具体的级别(例如“将此屏幕像素涂成红色”)。绘图软件包的目的是通过所有必要的控制，帮助您尽可能轻松地可视化您的数据-也就是说，在大多数情况下使用相对较高级别的命令，并且在需要时仍然能够使用低级别命令。</p><p>因此，matplotlib中的所有内容都是按照层次结构组织的。层次结构的顶部是matplotlib“状态机环境”，它是由<a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.html#module-matplotlib.pyplot" target="_blank" rel="noopener">matplotlib.pylot</a>模块提供的。在这个级别上，使用简单的函数来添加打印元素(线、图像、文本等)。到当前地物中的当前轴。</p><p>注意：Pyplot的状态机环境的行为类似于MATLAB，并且对于具有MATLAB经验的用户来说应该是最熟悉的。</p><p>层次结构中的下一级是面向对象的接口的第一级，其中pyplot仅用于少数功能，例如图形创建，并且用户显式创建并跟踪图形和轴对象。 在此级别，用户使用pyplot来创建图形，并且通过这些图形，可以创建一个或多个轴对象。 然后，这些轴对象用于大多数绘图操作。</p><p>对于更多的控制 - 这对于在GUI应用程序中嵌入matplotlib图表这一点至关重要 - 可以完全删除pyplot级别，从而留下纯粹面向对象的方法。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入matplotlib模块</span></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br></pre></td></tr></table></figure><h2 id="一个图的一部分"><a href="#一个图的一部分" class="headerlink" title="一个图的一部分"></a>一个图的一部分</h2><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/matplotlibCourse/" alt></p><h2 id="Figure"><a href="#Figure" class="headerlink" title="Figure"></a>Figure</h2><p>该图<strong>记录了所有<a href="https://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes" target="_blank" rel="noopener">子轴</a>，一些 “特殊” 的艺术家（标题，图形图例等）和画布</strong>。（不要过于担心画布，它是至关重要的，因为它实际上是绘图的对象，以获得你绘制的图像，但作为用户它或多或少是你不可见的）。一个数字可以有任意数量的<a href="https://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes" target="_blank" rel="noopener">Axes</a>，但是有用的应该至少有一个。<br>创建一个图像的最简单方法是使用pylot：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 没有坐标轴的空图形</span></span><br><span class="line">fig = plt.figure()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 为图形添加一个标题</span></span><br><span class="line">fig.suptitle(<span class="string">'No axes on this figure'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 带有2x2坐标轴网格的图形</span></span><br><span class="line">fig, ax_lst = plt.subplots(<span class="number">2</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/matplotlibCourse/output_3_1.png" alt="png"></p><h1 id="Axes对象"><a href="#Axes对象" class="headerlink" title="Axes对象"></a>Axes对象</h1><p>这就是你想象中的“一幅图”，它是具有数据空间的图像区域。给定的图形可以包含许多轴，但给定的<a href="https://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes" target="_blank" rel="noopener">Axes</a>对象只能在<a href="https://matplotlib.org/api/_as_gen/matplotlib.figure.Figure.html#matplotlib.figure.Figure" target="_blank" rel="noopener">一个图</a>中。 Axes包含两个（或3D的三个）<a href="https://matplotlib.org/api/axis_api.html#matplotlib.axis.Axis" target="_blank" rel="noopener">Axis</a>对象（注意Axes和Axis之间的差异），它们负责数据限制（数据限制也可以通过 <a href="https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.set_xlim.html#matplotlib.axes.Axes.set_xlim" target="_blank" rel="noopener">set_xlim()</a> 和 <a href="https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.set_ylim.html#matplotlib.axes.Axes.set_ylim" target="_blank" rel="noopener">set_ylim()</a> 来设置Axes方法）。每个Axes都有一个标题（通过 <a href="https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.set_title.html#matplotlib.axes.Axes.set_title" target="_blank" rel="noopener">set_title()</a> 设置），一个x标签（通过 <a href="https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.set_xlabel.html#matplotlib.axes.Axes.set_xlabel" target="_blank" rel="noopener">set_xlabel()</a> 设置）和一个通过 <a href="https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.set_ylabel.html#matplotlib.axes.Axes.set_ylabel" target="_blank" rel="noopener">set_ylabel()</a> 设置的y标签。</p><p>Axis 类及其成员函数是使用 OO 接口的主要入口点。</p><h2 id="Axis对象"><a href="#Axis对象" class="headerlink" title="Axis对象"></a>Axis对象</h2><p>这些是类似数字的对象。它们负责设置图形限制并生成刻度线（轴上的标记）和ticklabels（标记刻度线的字符串）。刻度线的位置由<a href="https://matplotlib.org/api/ticker_api.html#matplotlib.ticker.Locator" target="_blank" rel="noopener">Locator</a>对象确定，ticklabel字符串由<a href="https://matplotlib.org/api/ticker_api.html#matplotlib.ticker.Formatter" target="_blank" rel="noopener">Formatter</a>格式化。正确的定位器和格式化器的组合可以非常精确地控制刻度位置和标签。</p><h2 id="Artist对象"><a href="#Artist对象" class="headerlink" title="Artist对象"></a>Artist对象</h2><p>基本上你在图上看到的一切都是艺术家（Artist）对象（甚至是图，轴和轴对象）。这包括Text对象，Line2D对象，集合对象，Patch对象……（现在你明白了）。渲染图形时，所有艺术家都被绘制到画布（canvas）上。大多数艺术家（Artist）都与轴有关; 这样的艺术家（Artist）不能被多个轴共享，也不能从一个轴移动到另一个轴。</p><h2 id="绘制函数的输入类型"><a href="#绘制函数的输入类型" class="headerlink" title="绘制函数的输入类型"></a>绘制函数的输入类型</h2><p>所有绘图函数都需要np.array或np.ma.masked_array对象作为输入类型。如果是 “类数组（array-like）” 对象（如<a href="http://www.pypandas.cn/" target="_blank" rel="noopener">pandas</a>数据对象和np.matrix）可能会或可能不会按预期工作。最好在绘图之前将它们转换为np.array对象。</p><p>例如，要转换<a href="https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.html#pandas.DataFrame" target="_blank" rel="noopener">pandas.DataFrame</a></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">a = pd.DataFrame(np.random.rand(<span class="number">4</span>,<span class="number">5</span>), columns = list(<span class="string">'abcde'</span>))</span><br><span class="line">a_asndarray = a.values</span><br></pre></td></tr></table></figure><p>以及转换np.matrix</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">b = np.matrix([[<span class="number">1</span>,<span class="number">2</span>],[<span class="number">3</span>,<span class="number">4</span>]])</span><br><span class="line">b_asarray = np.asarray(b)</span><br></pre></td></tr></table></figure><h2 id="Matplotlib，pyplot和pylab：它们之间有什么关系？"><a href="#Matplotlib，pyplot和pylab：它们之间有什么关系？" class="headerlink" title="Matplotlib，pyplot和pylab：它们之间有什么关系？"></a>Matplotlib，pyplot和pylab：它们之间有什么关系？</h2><p>Matplotlib是整个包; <a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.html#module-matplotlib.pyplot" target="_blank" rel="noopener">matplotlib.pyplot</a> 是 matplotlib中的一个模块; 和pylab是一个与 matplotlib 一起安装的模块。</p><p>Pyplot为底层面向对象的绘图库提供状态机接口。 状态机隐式地自动创建图形和轴以实现所需的图形。例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">x = np.linspace(<span class="number">0</span>, <span class="number">2</span>, <span class="number">100</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建图形和轴,实现绘图</span></span><br><span class="line">plt.plot(x, x, label=<span class="string">'linear'</span>)</span><br><span class="line">plt.plot(x, x**<span class="number">2</span>, label=<span class="string">'quadratic'</span>)</span><br><span class="line">plt.plot(x, x**<span class="number">3</span>, label=<span class="string">'cubic'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#x/y轴标签</span></span><br><span class="line">plt.xlabel(<span class="string">'x label'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'y label'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#表名</span></span><br><span class="line">plt.title(<span class="string">"Simple Plot"</span>)</span><br><span class="line"></span><br><span class="line">plt.legend()</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/matplotlibCourse/output_9_0.png" alt="png"></p><p>第一次调用 plt.plot 将自动创建必要的图形和轴以实现所需的绘图。随后对plt.plot的调用会重新使用当前轴，并且每次都会添加另一行。设置标题，图例和轴标签还会自动使用当前轴并设置标题，创建图例并分别标记轴。</p><p>pylab是一个便利模块，它在单个名称空间中批量导入 <a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.html#module-matplotlib.pyplot" target="_blank" rel="noopener">matplotlib.pyplot</a>（用于绘图）和<a href="https://www.numpy.org.cn/" target="_blank" rel="noopener">numpy</a>一样（用于数学和使用数组）。不过不推荐使用pylab，并且由于命名空间污染而强烈建议不要使用它。请改用pyplot。</p><p>对于非交互式绘图，建议使用pyplot创建图形，然后使用OO界面进行绘图。</p><h2 id="代码风格"><a href="#代码风格" class="headerlink" title="代码风格"></a>代码风格</h2><p>查看此文档和示例时，您将找到不同的代码样式和使用模式。这些风格完全没有问题，各有利弊。几乎所有示例都可以转换为另一种样式并实现相同的结果。唯一需要注意的是避免为自己的代码混合了别的代码风格，尽量保持风格的统一。</p><p>注意：matplotlib的开发人员必须遵循特定的编程风格和指导原则。请参见<a href="https://matplotlib.org/devel/index.html#developers-guide-index" target="_blank" rel="noopener">Matplotlib开发人员手册</a>。</p><p>在不同的风格中，有两种是官方支持的。因此，这些是使用matplotlib的首选方法。</p><p>对于pyplot样式，脚本顶部的通常导入：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br></pre></td></tr></table></figure><p>然后调用一次，例如，np.arange，np.zeros，np.pi，plt.figure，plt.plot，plt.show等。使用pyplot接口创建图像，然后使用对象方法：<br>然后使用对象方法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">plt.figure(figsize = (<span class="number">10</span>, <span class="number">6</span>))</span><br><span class="line">x = np.arange(<span class="number">0</span>, <span class="number">10</span>, <span class="number">0.2</span>)</span><br><span class="line">y = np.sin(x)</span><br><span class="line">fig, ax = plt.subplots()</span><br><span class="line">ax.plot(x, y)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/matplotlibCourse/output_14_1.png" alt="png"></p><p>那么，为什么所有都是额外的类型而不是MATLAB样式(依赖于全局状态和平面名称空间)呢？对于像这个例子这样非常简单的事情，唯一的好处是学术性的：更冗长的风格更明确，更清楚地说明事物从何而来，以及正在发生的事情。对于更复杂的应用程序，这种明确性和明确性变得越来越有价值，而更丰富和更完整的面向对象接口可能会使程序更易于编写和维护。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_plotter</span><span class="params">(ax, data1, data2, param_dict)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    用来制作图表的辅助函数</span></span><br><span class="line"><span class="string">    参数</span></span><br><span class="line"><span class="string">    ----------</span></span><br><span class="line"><span class="string">    ax:Axes</span></span><br><span class="line"><span class="string">        要画的坐标轴</span></span><br><span class="line"><span class="string">    data1:数组</span></span><br><span class="line"><span class="string">        x数据</span></span><br><span class="line"><span class="string">    data2:数组</span></span><br><span class="line"><span class="string">        y数据</span></span><br><span class="line"><span class="string">    param_dict: dict类型</span></span><br><span class="line"><span class="string">        要传递给ax.plot的kwargs字典</span></span><br><span class="line"><span class="string">    Returns</span></span><br><span class="line"><span class="string">    -------</span></span><br><span class="line"><span class="string">    list:</span></span><br><span class="line"><span class="string">        list of artists added</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    out = ax.plot(data1, data2, **param_dict)</span><br><span class="line">    <span class="keyword">return</span> out</span><br><span class="line"></span><br><span class="line"><span class="comment"># which you would then use as:</span></span><br><span class="line">plt.figure(figsize = (<span class="number">10</span>, <span class="number">6</span>))</span><br><span class="line">data1, data2, data3, data4 = np.random.randn(<span class="number">4</span>, <span class="number">100</span>)</span><br><span class="line">fig, ax = plt.subplots(<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">my_plotter(ax, data1, data2, &#123;<span class="string">'marker'</span>: <span class="string">'x'</span>&#125;)</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/matplotlibCourse/output_16_2.png" alt="png"></p><p>或者如果你想有两个小子图：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建带有1x2坐标轴网格的图形</span></span><br><span class="line">fig, (ax1, ax2) = plt.subplots(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">my_plotter(ax1, data1, data2, &#123;<span class="string">'marker'</span>: <span class="string">'x'</span>&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">my_plotter(ax2, data3, data4, &#123;<span class="string">'marker'</span>: <span class="string">'o'</span>&#125;)</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/matplotlibCourse/output_18_1.png" alt="png"></p><p>同样，对于这些简单的例子来说，这种风格看起来有点过头了，但是一旦图形变得稍微复杂一些，就会有回报。</p><h2 id="后端-Backends"><a href="#后端-Backends" class="headerlink" title="后端(Backends)"></a>后端(Backends)</h2><h3 id="什么是后端？"><a href="#什么是后端？" class="headerlink" title="什么是后端？"></a>什么是后端？</h3><p>网站和邮件列表中的许多文档都提到了“后端（Backends）”，许多新用户对这个术语感到困惑。matplotlib针对许多不同的用例和输出格式。有些人在python shell中以交互方式使用matplotlib，并在键入命令时弹出绘图窗口。有些人运行Jupyter笔记本并绘制内联图以进行快速数据分析。其他人将matplotlib嵌入到图形用户界面（如wxpython或pygtk）中以构建丰富的应用程序。有些人在批处理脚本中使用matplotlib从数值模拟生成postscript图像，还有一些人运行Web应用程序服务器来动态提供图形。</p><p>为了支持所有这些用例，matplotlib可以针对不同的输出，并且这些功能中的每一个都称为后端（Backends）; “前端（frontend）”是面向用户的代码，即绘图代码，而“后端（Backends）”完成幕后的所有艰苦工作以制作图形。 有两种类型的后端：用户界面后端（用于pygtk，wxpython，tkinter，qt4或macosx;也称为“交互式后端”）和硬拷贝后端来制作图像文件（PNG，SVG，PDF，PS; 也被称为“非交互式后端”）。</p><p>配置后端有四种方法。如果它们彼此冲突，将使用以下列表中最后提到的方法，例如，调用 <a href="https://matplotlib.org/api/matplotlib_configuration_api.html#matplotlib.use" target="_blank" rel="noopener">use()</a> 将覆盖 matplotlibrc 中的设置。</p><pre><code>matplotlibrc文件中的后端参数（请参阅[使用样式表和rcParams自定义Matplotlib](https://matplotlib.org/tutorials/introductory/customizing.html)）：</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">backend : WXAgg   #使用带有反纹理(agg)呈现的wxpython</span><br></pre></td></tr></table></figure><pre><code>在Unix系统上，为当前shell或单个脚本设置[MPLBACKEND](https://matplotlib.org/faq/environment_variables_faq.html#envvar-MPLBACKEND)环境变量：</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; export MPLBACKEND=module://my_backend</span><br><span class="line">&gt; python simple_plot.py</span><br><span class="line"></span><br><span class="line">&gt; MPLBACKEND=&quot;module://my_backend&quot; python simple_plot.py</span><br></pre></td></tr></table></figure><p>在Windows上，只有前者是可用的：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; set MPLBACKEND=module://my_backend</span><br><span class="line">&gt; python simple_plot.py</span><br></pre></td></tr></table></figure><p>设置此环境变量将覆盖任何 matplotlibrc 中的后端参数，即使当前工作目录中存在matplotlibrc也是如此。 因此，全局设置<a href="https://matplotlib.org/faq/environment_variables_faq.html#envvar-MPLBACKEND" target="_blank" rel="noopener">MPLBACKEND</a> ，例如 在.bashrc 或 .profile 中，不鼓励它，因为它可能导致反常的行为。<br>如果您的脚本依赖于特定的后端，则可以使用 <a href="https://matplotlib.org/api/matplotlib_configuration_api.html#matplotlib.use" target="_blank" rel="noopener">use()</a> 函数：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib</span><br><span class="line"></span><br><span class="line"><span class="comment"># 默认情况下生成postscript输出</span></span><br><span class="line">matplotlib.use(<span class="string">'PS'</span>)</span><br></pre></td></tr></table></figure><p>如果使用 <a href="https://matplotlib.org/api/matplotlib_configuration_api.html#matplotlib.use" target="_blank" rel="noopener">use()</a> 函数，则必须在输入 <a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.html#module-matplotlib.pyplot" target="_blank" rel="noopener">matplotlib.pyplot</a> 之前完成此操作。导入 pyplot 后调用 <a href="https://matplotlib.org/api/matplotlib_configuration_api.html#matplotlib.use" target="_blank" rel="noopener">use()</a> 将不起作用。如果用户希望使用不同的后端，则使用 <a href="https://matplotlib.org/api/matplotlib_configuration_api.html#matplotlib.use" target="_blank" rel="noopener">use()</a> 将需要更改代码。因此，除非绝对必要，否则应避免显式调用 <a href="https://matplotlib.org/api/matplotlib_configuration_api.html#matplotlib.use" target="_blank" rel="noopener">use()</a>。</p><p>注意：后端名称规范不区分大小写；例如，‘GTK3Agg’ 和 ‘gtk3agg’ 是等效的。</p><p>通过典型的方式安装matplotlib，例如：从二进制安装程序或Linux发行包安装的话，可以设置好一个默认的后端，允许交互式工作和从脚本绘图，输出到屏幕和/或文件，所以至少一开始的时候你不需要使用上面给出的任何方法。</p><p>但是，如果您想编写图形用户界面或Web应用程序服务器（<a href="https://matplotlib.org/faq/howto_faq.html#howto-webapp" target="_blank" rel="noopener">Web应用程序服务器中的Matplotlib</a>），或者需要更好地了解正在发生的事情，请继续阅读。为了使图形用户界面可以更加自定义，matplotlib将画布（绘图所在的位置）中的渲染器（实际绘制的东西）的概念分开。用户界面的规范渲染器是Agg，它使用 <a href="http://antigrain.com/" target="_blank" rel="noopener">Anti-Grain Geometry</a> C++库来制作图形的光栅（像素）图像。除macosx之外的所有用户界面都可以与agg渲染一起使用，例如WXAgg，GTK3Agg，QT4Agg，QT5Agg，TkAgg。此外，一些用户界面支持其他渲染引擎。 例如，使用GTK + 3，您还可以选择Cairo渲染（后端GTK3Cairo）。</p><p>对于渲染引擎，还可以区分<a href="https://en.wikipedia.org/wiki/Vector_graphics" target="_blank" rel="noopener">矢量</a>(vector)或<a href="https://en.wikipedia.org/wiki/Raster_graphics" target="_blank" rel="noopener">光栅</a>(raster)渲染器。矢量图形语言发出绘图命令，例如“从此点到此点绘制线”，因此无标度，并且栅格后端生成线的像素表示，其精度取决于DPI设置。</p><p>下面是matplotlib渲染器的摘要(每个渲染器都有一个同名的后端；它们是非交互式后端，能够写入文件)：</p><table><thead><tr><th align="left">渲染格式</th><th align="left">文件类型</th><th align="center">描述</th></tr></thead><tbody><tr><td align="left">AGG</td><td align="left">png</td><td align="center">raster graphics – 使用反纹理几何（Anti-Grain Geometry）引擎的高质量图像。</td></tr><tr><td align="left">PS</td><td align="left">ps eps</td><td align="center">vector graphics – Postscript output</td></tr><tr><td align="left">PDF</td><td align="left">pdf</td><td align="center">vector graphics – Portable Document Format</td></tr><tr><td align="left">SVG</td><td align="left">svg</td><td align="center">vector graphics – Scalable Vector Graphics</td></tr><tr><td align="left">Cairo</td><td align="left">png ps pdf svg</td><td align="center">raster graphics 和 vector graphics – 使用 Cairo图形库(Cairo graphics)库</td></tr></tbody></table><p>以下是支持的用户界面和渲染器组合; 这些是交互式后端，能够显示到屏幕并使用上表中的适当渲染器写入文件：</p><table><thead><tr><th align="left">渲染格式</th><th align="center">文件类型</th></tr></thead><tbody><tr><td align="left">Qt5Agg</td><td align="center">在Qt5画布中进行Agg渲染(需要PyQt5)。可以在IPython中使用 %matplotlib qt5 激活此后端。</td></tr><tr><td align="left">ipympl</td><td align="center">嵌入在Jupyter小部件中的Agg渲染。（需要ipympl）。这个后端可以在带有％matplotlib ipympl 的Jupyter笔记本中启用。</td></tr><tr><td align="left">GTK3Agg</td><td align="center">Agg渲染到GTK 3.x画布（需要PyGObject，pycairo或cairocffi）。 可以使用％matplotlib gtk3 在 IPython中激活此后端。</td></tr><tr><td align="left">macosx</td><td align="center">将AGG渲染到OSX中的Cocoa画布中。可以在IPython中使用 %matplotlib OSX 激活此后端。</td></tr><tr><td align="left">TkAgg</td><td align="center">Agg渲染到Tk画布（需要TkInter）。可以使用 ％matplotlib tk 在IPython中激活此后端。</td></tr><tr><td align="left">nbAgg</td><td align="center">在经典的Jupyter笔记本中嵌入一个交互式界面。 可以通过％matplotlib 笔记本 在Jupyter笔记本中启用此后端。</td></tr><tr><td align="left">WebAgg</td><td align="center">show() 将启动一个带有交互式图形的 tornado 服务。</td></tr><tr><td align="left">GTK3Cairo</td><td align="center">在GTK 3.x画布上呈现cairo(需要PyGObject 和 pycairo 或 cairocffi )。</td></tr><tr><td align="left">Qt4Agg</td><td align="center">Agg渲染到 Qt4 画布（需要 PyQt4 或pyside）。可以使用 ％matplotlib qt4 在IPython中激活此后端。</td></tr><tr><td align="left">WXAgg</td><td align="center">Agg渲染到 wxWidgets 画布（需要wxPython 4）。可以使用 ％matplotlib wx 在IPython中激活此后端。</td></tr></tbody></table><h3 id="ipympl"><a href="#ipympl" class="headerlink" title="ipympl"></a>ipympl</h3><p>Jupyter小部件生态系统的移动速度太快，无法直接在Matplotlib中支持。安装ipympl</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">pip install ipympl</span><br><span class="line">jupyter nbextension enable --py --sys-prefix ipympl</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或者</span></span><br><span class="line">conda install ipympl -c conda-forge</span><br></pre></td></tr></table></figure><p>请参阅 <a href="https://github.com/matplotlib/jupyter-matplotlib" target="_blank" rel="noopener">jupyter-matplotlib</a> 了解更多细节。</p><h3 id="GTK-和-Cairo"><a href="#GTK-和-Cairo" class="headerlink" title="GTK 和 Cairo"></a>GTK 和 Cairo</h3><p>GTK3 后端 (包括 GTK3Agg 和 GTK3Cairo) 依赖于 Cairo (pycairo&gt;=1.11.0 或 cairocffi).</p><h3 id="如何选择PyQt4或PySide？"><a href="#如何选择PyQt4或PySide？" class="headerlink" title="如何选择PyQt4或PySide？"></a>如何选择PyQt4或PySide？</h3><p>QT_API环境变量可以设置为 pyqt 或 pyside，分别使用 PyQt4 或 PySide。</p><p>由于要使用的绑定的默认值是PyQt4，matplotlib 首先尝试导入它，如果导入失败，它会尝试导入 PySide。</p><h3 id="什么是交互模式？"><a href="#什么是交互模式？" class="headerlink" title="什么是交互模式？"></a>什么是交互模式？</h3><p>使用交互式后端（请参阅<a href="https://www.matplotlib.org.cn/tutorials/introductory/usage.html#%E4%BB%80%E4%B9%88%E6%98%AF%E5%90%8E%E7%AB%AF%EF%BC%9F" target="_blank" rel="noopener">什么是后端？</a>）允许但本身并不需要或确保绘制到屏幕上。是否以及何时绘制到屏幕，以及在屏幕上绘制绘图后是否继续脚本或shell会话取决于调用的函数和方法，以及确定matplotlib是否处于“交互模式”的状态变量”。默认的布尔值由matplotlibrc文件设置，并且可以像任何其他配置参数一样进行自定义（请参阅<a href="https://matplotlib.org/tutorials/introductory/customizing.html" target="_blank" rel="noopener">使用样式表和rcParams自定义Matplotlib</a>）。它也可以通过<a href="https://matplotlib.org/api/matplotlib_configuration_api.html#matplotlib.interactive" target="_blank" rel="noopener">matplotlib.interactive()</a> 设置，并且可以通过<a href="https://matplotlib.org/api/matplotlib_configuration_api.html#matplotlib.is_interactive" target="_blank" rel="noopener">matplotlib.is_interactive()</a> 查询其值。无论是在脚本还是在shell中，在绘图命令流的中间打开和关闭交互模式很少需要并且可能令人困惑，因此在下文中我们将假设所有绘图都是以交互模式打开或关闭。</p><p>注意：与交互性相关的主要更改，特别是<a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.show.html#matplotlib.pyplot.show" target="_blank" rel="noopener">show()</a>的角色和行为，在向matplotlib 1.0版的过渡中进行了更改，并在1.0.1中修复了错误。这里我们描述主要交互式后端的1.0.1版行为，但MacOSX除外。</p><p>交互模式也可以通过matplotlib.pyplot.ion()打开，并通过matplotlib.pyplot.ioff()关闭。</p><p>注意：交互模式在ipython和普通的python shell中使用合适的后端，但它在IDLE IDE中不起作用。如果默认后端不支持交互性，则通过“<a href="https://matplotlib.org/tutorials/introductory/usage.html#id4" target="_blank" rel="noopener">可以使用什么是后端？</a>”这个话题中讨论的任何方法显式激活交互式后端。</p><h3 id="交互例子"><a href="#交互例子" class="headerlink" title="交互例子"></a>交互例子</h3><p>从普通的python提示符，或者在没有选项的情况下调用ipython之后，试试这个：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">plt.ion()</span><br><span class="line">plt.plot([<span class="number">1.6</span>, <span class="number">2.7</span>])</span><br></pre></td></tr></table></figure><pre><code>[&lt;matplotlib.lines.Line2D at 0x20712cf1828&gt;]</code></pre><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/matplotlibCourse/output_25_1.png" alt="png"></p><p>假设您运行的是1.0.1或更高版本，并且默认情况下安装并选择了交互式后端，您应该看到一个图，并且您的终端提示也应该是活动的; 您可以键入其他命令，例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">plt.title(<span class="string">"interactive test"</span>)</span><br><span class="line">plt.xlabel(<span class="string">"index"</span>)</span><br></pre></td></tr></table></figure><pre><code>Text(0.5, 0, &apos;index&apos;)</code></pre><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/matplotlibCourse/output_27_1.png" alt="png"></p><p>然后你会看到每一行后都要更新绘图。从版本1.5开始，通过其他方式修改绘图也应该自动更新大多数后端的显示。获取对<a href="https://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes" target="_blank" rel="noopener">Axes</a>实例的引用，并调用该实例的方法：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ax = plt.gca()</span><br><span class="line">ax.plot([<span class="number">3.1</span>, <span class="number">2.2</span>])</span><br></pre></td></tr></table></figure><pre><code>[&lt;matplotlib.lines.Line2D at 0x20712a740f0&gt;]</code></pre><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/matplotlibCourse/output_29_1.png" alt="png"></p><p>如果你使用的是某些后端（如macosx）或旧版本的matplotlib，则可能无法立即将新行添加到绘图中。在这种情况下，您需要显式调用<a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.draw.html#matplotlib.pyplot.draw" target="_blank" rel="noopener">draw()</a> 以更新绘图：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.draw()</span><br></pre></td></tr></table></figure><pre><code>&lt;Figure size 432x288 with 0 Axes&gt;</code></pre><h3 id="非交互式示例"><a href="#非交互式示例" class="headerlink" title="非交互式示例"></a>非交互式示例</h3><p>像上一个示例中一样开始一个新会话，但现在关闭交互模式：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line">plt.ioff()</span><br><span class="line">plt.plot([<span class="number">1.6</span>, <span class="number">2.7</span>])</span><br></pre></td></tr></table></figure><pre><code>[&lt;matplotlib.lines.Line2D at 0x20712a9afd0&gt;]</code></pre><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/matplotlibCourse/output_33_1.png" alt="png"></p><p>什么都没发生 - 或者至少没有任何东西出现在屏幕上（除非你使用macosx后端，这是异常的）。要显示绘图，您需要执行以下操作：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p>现在你看到图像，但你的终端命令行没有响应; show() 命令会阻止其他命令的输入，直到您手动终止绘图窗口。</p><p>被迫使用阻塞功能？这有什么用，假设您需要一个脚本，将文件内容绘制到屏幕上。您想查看该图，然后结束脚本。如果没有一些阻塞命令（如show()），脚本会闪现图像，然后立即结束，屏幕上不显示任何内容。</p><p>此外，非交互模式会将所有图形延迟到调用show()；这比每次在脚本中添加新功能时重新绘制打印更有效。</p><p>在版本1.0之前，show()通常不能在单个脚本中调用多次(尽管有时可以不受限制)；对于版本1.0.1及更高版本，此限制已解除，因此可以编写如下脚本：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">plt.ioff()</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>):</span><br><span class="line">    plt.plot(np.random.rand(<span class="number">10</span>))</span><br><span class="line">    plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/matplotlibCourse/output_37_0.png" alt="png"></p><p>这就形成了三个阴谋，一次一个。即。第一个地块关闭后，将显示第二个地块。</p><h3 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h3><p>在交互模式下，pyplot功能会自动绘制到屏幕上。</p><p>交互式绘制时，如果除了pyplot函数之外还使用对象方法调用，则只要想要刷新绘图，就调用<a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.draw.html#matplotlib.pyplot.draw" target="_blank" rel="noopener">draw()</a> 。</p><p>在要生成一个或多个图形的脚本中使用非交互模式，并在结束或生成一组新图形之前显示它们。在这种情况下，使用<a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.show.html#matplotlib.pyplot.show" target="_blank" rel="noopener">show()</a>显示图形并阻止执行，直到您手动销毁它们。</p><h3 id="性能"><a href="#性能" class="headerlink" title="性能"></a>性能</h3><p>无论是以交互模式探索数据还是以编程方式保存大量绘图，渲染性能都可能成为您管道中的一个痛苦瓶颈。Matplotlib提供了几种方法来大大减少渲染时间，但代价是绘图外观略有变化（达到可设置的容差）。可用于缩短渲染时间的方法取决于正在创建的绘图类型。</p><h3 id="线段简化"><a href="#线段简化" class="headerlink" title="线段简化"></a>线段简化</h3><p>对于具有直线段的打印(例如，典型的直线打印、多边形轮廓等)，渲染性能可以由matplotLibrc文件中的path.Simplify和path.Simplify_Threshold参数控制(有关matplotlib文件的详细信息，请参见<a href="https://matplotlib.org/tutorials/introductory/customizing.html" target="_blank" rel="noopener">使用样式表和rcParams自定义Matplotlib</a>)。Simplify参数是一个布尔值，用于指示是否简化了直线段。path.Simplify_Threshold参数控制简化线段的程度；阈值越高，渲染速度越快。</p><p>以下脚本将首先显示数据而不进行任何简化，然后简化显示相同的数据。 尝试与它们互动：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> matplotlib <span class="keyword">as</span> mpl</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置并创建要绘图的数据</span></span><br><span class="line">y = np.random.rand(<span class="number">100000</span>)</span><br><span class="line">y[<span class="number">50000</span>:] *= <span class="number">2</span></span><br><span class="line">y[np.logspace(<span class="number">1</span>, np.log10(<span class="number">50000</span>), <span class="number">400</span>).astype(int)] = <span class="number">-1</span></span><br><span class="line">mpl.rcParams[<span class="string">'path.simplify'</span>] = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">mpl.rcParams[<span class="string">'path.simplify_threshold'</span>] = <span class="number">0.0</span></span><br><span class="line">plt.plot(y)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line">mpl.rcParams[<span class="string">'path.simplify_threshold'</span>] = <span class="number">1.0</span></span><br><span class="line">plt.plot(y)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/matplotlibCourse/output_40_0.png" alt="png"></p><p>Matplotlib目前默认为1/9的保守简化阈值。如果要更改默认设置以使用其他值，可以更改matplotlibrc文件。或者，您可以为交互式绘图（具有最大简化）创建新样式，并为出版质量绘图创建另一种样式（最小化简化）并根据需要激活它们。有关如何执行这些操作的说明，请参阅<a href="https://matplotlib.org/tutorials/introductory/customizing.html" target="_blank" rel="noopener">使用样式表和rcParams自定义Matplotlib</a>。</p><p>简化通过将线段迭代地合并为单个矢量直到下一个线段与矢量的垂直距离（在显示坐标空间中测量）大于 path.simplify_threshold 参数来工作。</p><p>注意：与版本细分如何简化相关的更改在版本2.1中进行。 2.1之前的这些参数仍将改善渲染时间，但2.1版及更高版本的某些类型数据的渲染时间将大大改善。</p><h3 id="标记简化"><a href="#标记简化" class="headerlink" title="标记简化"></a>标记简化</h3><p>标记也可以简化，尽管不如线段强大。标记简化仅适用于<a href="https://matplotlib.org/api/_as_gen/matplotlib.lines.Line2D.html#matplotlib.lines.Line2D" target="_blank" rel="noopener">Line2D</a>对象（通过市场营销属性）。无论在哪里传递<a href="https://matplotlib.org/api/_as_gen/matplotlib.lines.Line2D.html#matplotlib.lines.Line2D" target="_blank" rel="noopener">Line2D</a>构造参数，例如<a href="https://matplotlib.org/api/_as_gen/matplotlib.pyplot.plot.html#matplotlib.pyplot.plot" target="_blank" rel="noopener">matplotlib.pyplot.plot()</a> 和 <a href="https://matplotlib.org/api/_as_gen/matplotlib.axes.Axes.plot.html#matplotlib.axes.Axes.plot" target="_blank" rel="noopener">matplotlib.axes.Axes.plot()</a>，都可以使用markevery参数：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.plot(x, y, markevery=<span class="number">10</span>)</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/matplotlibCourse/output_42_1.png" alt="png"></p><p>市场营销论证允许天真的子采样，或尝试均匀间隔（沿x轴）采样。 有关更多信息，请参阅Markevery演示。</p><h3 id="将线分割成较小的块"><a href="#将线分割成较小的块" class="headerlink" title="将线分割成较小的块"></a>将线分割成较小的块</h3><p>如果您正在使用Agg后端（请参阅<a href="https://www.matplotlib.org.cn/tutorials/introductory/usage.html#%E4%BB%80%E4%B9%88%E6%98%AF%E5%90%8E%E7%AB%AF%EF%BC%9F" target="_blank" rel="noopener">什么是后端？</a>），那么您可以使用 agg.path.chunksize rc参数。这允许您指定块大小，并且任何具有大于该多个顶点的行将被分割成多行，每行不超过 agg.path.chunksize 许多顶点。（除非agg.path.chunksize为零，在这种情况下没有分块。）对于某种类型的数据，将线条分成合理的大小可以大大减少渲染时间。</p><p>以下脚本将首先显示没有任何块大小限制的数据，然后显示块大小为10,000的相同数据。当数字很大时，可以最好地看到差异，尝试最大化GUI然后与它们进行交互：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> matplotlib <span class="keyword">as</span> mpl</span><br><span class="line">mpl.rcParams[<span class="string">'path.simplify_threshold'</span>] = <span class="number">1.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Setup, and create the data to plot</span></span><br><span class="line">y = np.random.rand(<span class="number">100000</span>)</span><br><span class="line">y[<span class="number">50000</span>:] *= <span class="number">2</span></span><br><span class="line">y[np.logspace(<span class="number">1</span>,np.log10(<span class="number">50000</span>), <span class="number">400</span>).astype(int)] = <span class="number">-1</span></span><br><span class="line">mpl.rcParams[<span class="string">'path.simplify'</span>] = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">mpl.rcParams[<span class="string">'agg.path.chunksize'</span>] = <span class="number">0</span></span><br><span class="line">plt.plot(y)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line">mpl.rcParams[<span class="string">'agg.path.chunksize'</span>] = <span class="number">10000</span></span><br><span class="line">plt.plot(y)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/matplotlibCourse/output_44_0.png" alt="png"></p><h3 id="图例"><a href="#图例" class="headerlink" title="图例"></a>图例</h3><p>轴的默认图例行为尝试查找覆盖最少数据点的位置（loc =’best’）。 如果有大量数据点，这可能是非常昂贵的计算。 在这种情况下，您可能希望提供特定位置。</p><h3 id="使用快速的风格"><a href="#使用快速的风格" class="headerlink" title="使用快速的风格"></a>使用快速的风格</h3><p>快速样式可用于自动将简化和分块参数设置为合理的设置，以加快绘制大量数据的速度。它可以通过运行简单地使用：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.style <span class="keyword">as</span> mplstyle</span><br><span class="line">mplstyle.use(<span class="string">'fast'</span>)</span><br></pre></td></tr></table></figure><p>它的重量非常轻，因此它可以很好地与其他风格配合使用，只需确保最后应用快速样式，以便其他样式不会覆盖设置：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mplstyle.use([<span class="string">'dark_background'</span>, <span class="string">'ggplot'</span>, <span class="string">'fast'</span>])</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Matplotlib 是 Python 的绘图库。 它可与 NumPy 一起使用，提供了一种有效的 MatLab 开源替代方案。&lt;br&gt;&lt;img src=&quot;https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/matplotlibCourse/fengmian.png&quot; alt=&quot;png&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="Python" scheme="http://www.codingpy.cn/categories/Python/"/>
    
    
      <category term="Python" scheme="http://www.codingpy.cn/tags/Python/"/>
    
      <category term="matplotlib" scheme="http://www.codingpy.cn/tags/matplotlib/"/>
    
  </entry>
  
  <entry>
    <title>Seaborn中文教程（转）</title>
    <link href="http://www.codingpy.cn/2019/07/25/seaborn/"/>
    <id>http://www.codingpy.cn/2019/07/25/seaborn/</id>
    <published>2019-07-25T00:30:00.000Z</published>
    <updated>2019-09-20T14:17:00.812Z</updated>
    
    <content type="html"><![CDATA[<p>Seaborn是基于matplotlib的图形可视化python包。它提供了一种高度交互式界面，便于用户能够做出各种有吸引力的统计图表。<br>Seaborn是在matplotlib的基础上进行了更高级的API封装，从而使得作图更加容易，在大多数情况下使用seaborn能做出很具有吸引力的图，而使用matplotlib就能制作具有更多特色的图。应该把Seaborn视为matplotlib的补充，而不是替代物。同时它能高度兼容numpy与pandas数据结构以及scipy与statsmodels等统计模式。</p><a id="more"></a><h1 id="章节概要"><a href="#章节概要" class="headerlink" title="章节概要"></a>章节概要</h1><ol><li>Seaborn介绍：</li><li>安装Seaborn</li><li>加载库和数据文件</li><li>Seaborn的绘图功能</li><li>用Matplotlib定制</li><li>Pandas的作用</li><li>Seaborn 主题</li><li>调色盘</li><li>图形重叠</li><li>融合数据</li><li>迷你画廊 </li></ol><h2 id="安装Seaborn"><a href="#安装Seaborn" class="headerlink" title="安装Seaborn"></a>安装Seaborn</h2><p>首先确定你的电脑已安装以下应用 </p><ul><li>Python 2.7+ or Python 3 </li><li>Pandas </li><li>Matplotlib </li><li>Seaborn </li><li>Jupyter Notebook(可选)</li></ul><p>打开Jupyter Notebook, 过几秒钟会弹出网页窗口Home。<br><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/assets@master/1.png" alt="image.png"><br>点击右侧的New，新建一个Notebook，弹出一个新的网页窗口，点击上方可命名文件。<br><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/assets@master/2.png" alt="image.png"></p><h2 id="Seaborn介绍："><a href="#Seaborn介绍：" class="headerlink" title="Seaborn介绍："></a>Seaborn介绍：</h2><p>Seaborn属于Matplotlib的一个高级接口，为我们进行数据的可视化分析提供了极大的方便。 </p><h2 id="加载库和数据文件"><a href="#加载库和数据文件" class="headerlink" title="加载库和数据文件"></a>加载库和数据文件</h2><p>加载pandas、matplotlib、seaborn。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># coding: utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#加载pandas</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="comment">#加载matplotlib</span></span><br><span class="line"><span class="keyword">from</span> matplotlib <span class="keyword">import</span> pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment">#在notebook中显示数据点</span></span><br><span class="line">%matplotlib inline</span><br><span class="line"></span><br><span class="line"><span class="comment">#加载seaborn</span></span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sb</span><br></pre></td></tr></table></figure><p>这里提供了一个数据文件，下载链接为<br><a href="https://elitedatascience.com/wp-content/uploads/2017/04/Pokemon.csv" target="_blank" rel="noopener">Pokemon.csv</a></p><p>用pandas读取数据文件，并显示前五行。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#用pandas读取Pokemon.csv</span></span><br><span class="line">df = pd.read_csv(<span class="string">"f:/Pokemon.csv"</span>, encoding = <span class="string">"unicode_escape"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#读取前五行，编译后的结果为一个列表。</span></span><br><span class="line">df.head()</span><br></pre></td></tr></table></figure><div><style scoped>    .dataframe tbody tr th:only-of-type {        vertical-align: middle;    }<pre><code>.dataframe tbody tr th {    vertical-align: top;}.dataframe thead th {    text-align: right;}</code></pre><p></style><p></p><table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>#</th>      <th>Name</th>      <th>Type 1</th>      <th>Type 2</th>      <th>Total</th>      <th>HP</th>      <th>Attack</th>      <th>Defense</th>      <th>Sp. Atk</th>      <th>Sp. Def</th>      <th>Speed</th>      <th>Stage</th>      <th>Legendary</th>    </tr>  </thead>  <tbody>    <tr>      <th>0</th>      <td>1</td>      <td>Bulbasaur</td>      <td>Grass</td>      <td>Poison</td>      <td>318</td>      <td>45</td>      <td>49</td>      <td>49</td>      <td>65</td>      <td>65</td>      <td>45</td>      <td>1</td>      <td>False</td>    </tr>    <tr>      <th>1</th>      <td>2</td>      <td>Ivysaur</td>      <td>Grass</td>      <td>Poison</td>      <td>405</td>      <td>60</td>      <td>62</td>      <td>63</td>      <td>80</td>      <td>80</td>      <td>60</td>      <td>2</td>      <td>False</td>    </tr>    <tr>      <th>2</th>      <td>3</td>      <td>Venusaur</td>      <td>Grass</td>      <td>Poison</td>      <td>525</td>      <td>80</td>      <td>82</td>      <td>83</td>      <td>100</td>      <td>100</td>      <td>80</td>      <td>3</td>      <td>False</td>    </tr>    <tr>      <th>3</th>      <td>4</td>      <td>Charmander</td>      <td>Fire</td>      <td>NaN</td>      <td>309</td>      <td>39</td>      <td>52</td>      <td>43</td>      <td>60</td>      <td>50</td>      <td>65</td>      <td>1</td>      <td>False</td>    </tr>    <tr>      <th>4</th>      <td>5</td>      <td>Charmeleon</td>      <td>Fire</td>      <td>NaN</td>      <td>405</td>      <td>58</td>      <td>64</td>      <td>58</td>      <td>80</td>      <td>65</td>      <td>80</td>      <td>2</td>      <td>False</td>    </tr>  </tbody></table></div><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#绘制散点图</span></span><br><span class="line">sb.lmplot(x = <span class="string">'Attack'</span>, y = <span class="string">'Defense'</span>, data = df)</span><br></pre></td></tr></table></figure><pre><code>D:\Function\Anaconda3\lib\site-packages\scipy\stats\stats.py:1713: FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.  return np.add.reduce(sorted[indexer] * weights, axis=axis) / sumval&lt;seaborn.axisgrid.FacetGrid at 0x2ea94d27c50&gt;</code></pre><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/seaborn/output_8_2.png" alt="png"></p><h2 id="Seaborn的绘图功能"><a href="#Seaborn的绘图功能" class="headerlink" title="Seaborn的绘图功能"></a>Seaborn的绘图功能</h2><p>Seaborn最大的优点之一在于其种类繁多的绘图功能，下面我们利用lmplot()函数，用一行代码来绘制散点图。我们希望x轴显示Attack数据，y轴显示Defense数据，则可以编写代码。 </p><p>事实上seaborn并没有专门用来绘制散点图的功能，实际上我们用它来拟合和绘制回归线。<br>幸运的是，我们可以通过设置函数的参数来得到我们想要的散点图。用fit_reg = False 移去回归线，用hug参数来用不同颜色显示Pokemon进化阶段的信息。 </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#移去回归线，用不同颜色来表示pokemon的进化阶段，即刻得到散点图：</span></span><br><span class="line"></span><br><span class="line">sb.lmplot(x = <span class="string">'Attack'</span>, y = <span class="string">'Defense'</span>, data = df,</span><br><span class="line">         fit_reg = <span class="literal">False</span>,</span><br><span class="line">         hue = <span class="string">'Stage'</span>)</span><br></pre></td></tr></table></figure><pre><code>&lt;seaborn.axisgrid.FacetGrid at 0x2ea950e4278&gt;</code></pre><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/seaborn/output_11_1.png" alt="png"></p><p>从散点图可以看出，所有的数据点都分布在数轴的正半轴，然而散点图的数轴从负数开始的，我们可以对它进行改进。</p><h2 id="用Matplotlib定制"><a href="#用Matplotlib定制" class="headerlink" title="用Matplotlib定制"></a>用Matplotlib定制</h2><p>虽然Seaborn是Matplotlib的一个高级接口，但是我们有时候也需要用到Matplotlib。其中包括设置数轴的范围。我们利用Matplotlib的ylim()和xlim()函数来设置数轴的范围。 </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#设置数轴范围</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">plt.gca().set(xlim = (<span class="number">0</span>, <span class="literal">None</span>), ylim = (<span class="number">0</span>, <span class="literal">None</span>),</span><br><span class="line">             xlabel=<span class="string">'Attack'</span>, ylabel=<span class="string">'Defense'</span>)</span><br></pre></td></tr></table></figure><pre><code>[(0, 1.0), Text(0, 0.5, &apos;Defense&apos;), (0, 1.0), Text(0.5, 0, &apos;Attack&apos;)]</code></pre><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/seaborn/output_14_1.png" alt="png"></p><h2 id="Pandas的作用"><a href="#Pandas的作用" class="headerlink" title="Pandas的作用"></a>Pandas的作用</h2><p>尽管这是一个Seaborn教程，pandas依然在实际应用中起到了十分重要的作用。下面我们根据Pokemon的攻击数据来绘制箱形图</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sb.boxplot(data = df)</span><br><span class="line"><span class="comment">#得到的箱形图：</span></span><br></pre></td></tr></table></figure><pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x2ea950c99b0&gt;</code></pre><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/seaborn/output_16_1.png" alt="png"></p><p>很好，这是一个良好的开端，但是我们可以移除不需要的几列数据。</p><pre><code>移除掉Total，因为我们有独立的统计数据。移除掉Stage跟Legendary，因为它们不是攻击统计数据。我们可以创建一个新的数据集stats_df，满足我们上述的要求。</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#创建新数据集</span></span><br><span class="line">stats_df = df.drop([<span class="string">'Total'</span>, <span class="string">'Stage'</span>, <span class="string">'Legendary'</span>], axis = <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#Boxplot</span></span><br><span class="line">sb.boxplot(data = stats_df)</span><br></pre></td></tr></table></figure><pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x2ea962be358&gt;</code></pre><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/seaborn/output_18_1.png" alt="png"></p><p>得到了一个改进了的箱形图。</p><h2 id="Seaborn-主题"><a href="#Seaborn-主题" class="headerlink" title="Seaborn 主题"></a>Seaborn 主题</h2><p>Seaborn的另一个好处就是其恰到好处、开箱即用的风格主题。其默认的主题为“darkgrid”<br>下一步，我们把主题改为“whitegrid”来创建一个小提琴图</p><pre><code>小提琴图常常作为箱形图的替代小提琴图通过小提琴的厚度展示了数据的分布，而不仅仅是总结数据。根据Pokemon的主要类型，我们可以将Attack数据的分布可视化。 </code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#设置主题</span></span><br><span class="line">sb.set_style(<span class="string">'whitegrid'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#violin plot</span></span><br><span class="line">sb.violinplot(x = <span class="string">'Type 1'</span>, y = <span class="string">'Attack'</span>, data = df)</span><br></pre></td></tr></table></figure><pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x2ea96343828&gt;</code></pre><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/seaborn/output_21_1.png" alt="png"></p><p>可以得到小提琴图，x轴显示的是Pokemon的Type1，y轴显示的是不同Pokemon的攻击数值。 </p><h2 id="调色盘"><a href="#调色盘" class="headerlink" title="调色盘"></a>调色盘</h2><p>Seaborn可以根据我们的需求，来设置颜色。我们可以创建一个python命令列表，用颜色的十六进制数值来设置。数值可以在<a href="https://bulbapedia.bulbagarden.net/wiki/Category:Type_color_templates" target="_blank" rel="noopener">Bulbapedia</a>中寻找。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#创建颜色列表</span></span><br><span class="line">pkmn_type_colors = [<span class="string">'#78C850'</span>,</span><br><span class="line">                    <span class="string">'#F08030'</span>,</span><br><span class="line">                    <span class="string">'#6890F0'</span>,</span><br><span class="line">                    <span class="string">'#A8B820'</span>,</span><br><span class="line">                    <span class="string">'#A8A878'</span>,</span><br><span class="line">                    <span class="string">'#A040A0'</span>,</span><br><span class="line">                    <span class="string">'#F8D030'</span>,</span><br><span class="line">                    <span class="string">'#E0C068'</span>,</span><br><span class="line">                    <span class="string">'#EE99AC'</span>,</span><br><span class="line">                    <span class="string">'#C03028'</span>,</span><br><span class="line">                    <span class="string">'#F85888'</span>,</span><br><span class="line">                    <span class="string">'#B8A038'</span>,</span><br><span class="line">                    <span class="string">'#705898'</span>,</span><br><span class="line">                    <span class="string">'#98D8D8'</span>,</span><br><span class="line">                    <span class="string">'#7038F8'</span></span><br><span class="line">                   ]</span><br><span class="line"></span><br><span class="line"><span class="comment">#导入小提琴图中</span></span><br><span class="line">sb.violinplot(x = <span class="string">'Type 1'</span>, y = <span class="string">'Attack'</span>, data = df,</span><br><span class="line">             palette = pkmn_type_colors)</span><br></pre></td></tr></table></figure><pre><code>D:\Function\Anaconda3\lib\site-packages\scipy\stats\stats.py:1713: FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.  return np.add.reduce(sorted[indexer] * weights, axis=axis) / sumval&lt;matplotlib.axes._subplots.AxesSubplot at 0x2ea94d24470&gt;</code></pre><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/seaborn/output_24_2.png" alt="png"></p><p>为了能够让数据文件中的151个Pokemon都能够在图中简单展示，我们可以用群集图 swarm plot达到这一目的。 </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sb.swarmplot(x = <span class="string">'Type 1'</span>, y = <span class="string">'Attack'</span>, data = df,</span><br><span class="line">            palette = pkmn_type_colors)</span><br></pre></td></tr></table></figure><pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x2ea96d5bda0&gt;</code></pre><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/seaborn/output_26_1.png" alt="png"></p><h2 id="图形重叠"><a href="#图形重叠" class="headerlink" title="图形重叠"></a>图形重叠</h2><p>我们已经绘制出了小提琴图和群集图，Seaborn允许我们将这两张图整合在一张图上，步骤如下：</p><pre><code>首先，我们用Matplotlib设置图形比例。然后，我们绘制小提琴图，用inner = None将小提琴中间的木杆移去。接着，我们绘制群集图，并将数据点的颜色变为黑色。最后，我们可以用Matplotlib设置一个标题。</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#设置图形比例</span></span><br><span class="line">plt.figure(figsize = (<span class="number">10</span>, <span class="number">6</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建violinplot</span></span><br><span class="line">sb.violinplot(x = <span class="string">'Type 1'</span>, y = <span class="string">'Attack'</span>, data = df,</span><br><span class="line">              inner = <span class="literal">None</span>,</span><br><span class="line">             palette = pkmn_type_colors)</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建swarmplot</span></span><br><span class="line">sb.swarmplot(x = <span class="string">'Type 1'</span>, y = <span class="string">'Attack'</span>, data = df,</span><br><span class="line">             color = <span class="string">'k'</span>,</span><br><span class="line">            palette = pkmn_type_colors)</span><br><span class="line"></span><br><span class="line"><span class="comment">#设置标题</span></span><br><span class="line">plt.title(<span class="string">'Attack by Type'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#其中alpha为透明度。 编译后可以得到如下图形。</span></span><br></pre></td></tr></table></figure><pre><code>Text(0.5, 1.0, &apos;Attack by Type&apos;)</code></pre><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/seaborn/output_28_1.png" alt="png"></p><p>现在我们可以清晰的看到不同Pokemon的攻击值了。那么我们怎么看其他的数值呢？</p><h2 id="融合数据"><a href="#融合数据" class="headerlink" title="融合数据"></a>融合数据</h2><p>为了展现其他的数据，我们当然可以重复以上的步骤，绘制多张图。但是我们同样也可以在一张图上表示所有的数据，这时候pandas就派上用场了。<br>我们可以利用pandas的melt()函数来将一些数据进行融合，这样就可以在不同Pokemon之间直接进行比对，melt()需要导入3个参数，分别为：</p><pre><code>需要融合的数据列表需要保留的ID变量，其他变量将会被Pandas融合。融合而成的新变量的名字。</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#数据融合</span></span><br><span class="line">melted_df = pd.melt(stats_df,</span><br><span class="line">                   id_vars = [<span class="string">'Name'</span>, <span class="string">'Type 1'</span>, <span class="string">'Type 2'</span>],</span><br><span class="line">                   var_name = <span class="string">'Stat'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#前五行</span></span><br><span class="line">melted_df.head()</span><br></pre></td></tr></table></figure><div><style scoped>    .dataframe tbody tr th:only-of-type {        vertical-align: middle;    }<pre><code>.dataframe tbody tr th {    vertical-align: top;}.dataframe thead th {    text-align: right;}</code></pre><p></style><p></p><table border="1" class="dataframe">  <thead>    <tr style="text-align: right;">      <th></th>      <th>Name</th>      <th>Type 1</th>      <th>Type 2</th>      <th>Stat</th>      <th>value</th>    </tr>  </thead>  <tbody>    <tr>      <th>0</th>      <td>Bulbasaur</td>      <td>Grass</td>      <td>Poison</td>      <td>#</td>      <td>1</td>    </tr>    <tr>      <th>1</th>      <td>Ivysaur</td>      <td>Grass</td>      <td>Poison</td>      <td>#</td>      <td>2</td>    </tr>    <tr>      <th>2</th>      <td>Venusaur</td>      <td>Grass</td>      <td>Poison</td>      <td>#</td>      <td>3</td>    </tr>    <tr>      <th>3</th>      <td>Charmander</td>      <td>Fire</td>      <td>NaN</td>      <td>#</td>      <td>4</td>    </tr>    <tr>      <th>4</th>      <td>Charmeleon</td>      <td>Fire</td>      <td>NaN</td>      <td>#</td>      <td>5</td>    </tr>  </tbody></table></div><p>我们为已经融合的数据列表melted_df绘制群集图。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#数据融合</span></span><br><span class="line">melted_df = pd.melt(stats_df,</span><br><span class="line">                   id_vars = [<span class="string">'Name'</span>, <span class="string">'Type 1'</span>, <span class="string">'Type 2'</span>],</span><br><span class="line">                   var_name = <span class="string">'Stat'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#前五行</span></span><br><span class="line">melted_df.head()</span><br><span class="line"></span><br><span class="line"><span class="comment">#绘制群集图</span></span><br><span class="line">sb.swarmplot(x = <span class="string">'Stat'</span>, y = <span class="string">'value'</span>, data = melted_df,</span><br><span class="line">            hue = <span class="string">'Type 1'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#就可以得到如下的群集图。x轴为Stat中融合的六个变量，y轴为Stat的值，不同颜色代表不同的Pokemon Type 1。</span></span><br></pre></td></tr></table></figure><pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x2ea9887da58&gt;</code></pre><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/seaborn/output_33_1.png" alt="png"></p><p>这张图表有一些细节需要完善：</p><pre><code>扩大图表。使用split = True 来分隔色调。使用我们自定义的颜色。调整y轴的范围将图例放在右侧。</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#扩大图表</span></span><br><span class="line">plt.figure(figsize = (<span class="number">10</span>, <span class="number">8</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#绘制群集图，使用split = True 来分割，使用自定义的颜色</span></span><br><span class="line">sb.swarmplot(x = <span class="string">'Stat'</span>, y = <span class="string">'value'</span>, data = melted_df,</span><br><span class="line">            hue = <span class="string">"Type 1"</span>,</span><br><span class="line">            split = <span class="literal">True</span>,</span><br><span class="line">            palette = pkmn_type_colors)</span><br><span class="line"></span><br><span class="line"><span class="comment">#调整Y轴的范围</span></span><br><span class="line">plt.ylim(<span class="number">0</span>,<span class="number">260</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#将图例放在右侧</span></span><br><span class="line">plt.legend(bbox_to_anchor = (<span class="number">1</span>,<span class="number">1</span>), loc = <span class="number">2</span>)</span><br></pre></td></tr></table></figure><pre><code>D:\Function\Anaconda3\lib\site-packages\seaborn\categorical.py:2974: UserWarning: The `split` parameter has been renamed to `dodge`.  warnings.warn(msg, UserWarning)&lt;matplotlib.legend.Legend at 0x2ea98a7f0b8&gt;</code></pre><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/seaborn/output_35_2.png" alt="png"></p><p>即可得到一个已经细节完善后的图表。 </p><h2 id="迷你画廊"><a href="#迷你画廊" class="headerlink" title="迷你画廊"></a>迷你画廊</h2><h3 id="Heatmap"><a href="#Heatmap" class="headerlink" title="Heatmap"></a>Heatmap</h3><p>Heatmap可以帮助可视化矩阵状的数据。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#计算相关性</span></span><br><span class="line">corr = stats_df.corr()</span><br><span class="line"></span><br><span class="line"><span class="comment">#Hteatmap</span></span><br><span class="line">sb.heatmap(corr)</span><br></pre></td></tr></table></figure><pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x2ea98dac4e0&gt;</code></pre><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/seaborn/output_38_1.png" alt="png"></p><h3 id="Histogram"><a href="#Histogram" class="headerlink" title="Histogram"></a>Histogram</h3><p>Histogram能够绘制变量的数值分布。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#绘制直方图</span></span><br><span class="line">sb.distplot(df.Attack)</span><br></pre></td></tr></table></figure><pre><code>&lt;matplotlib.axes._subplots.AxesSubplot at 0x2ea988d2da0&gt;</code></pre><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/seaborn/output_40_1.png" alt="png"></p><h3 id="Bar-Plot"><a href="#Bar-Plot" class="headerlink" title="Bar Plot"></a>Bar Plot</h3><p>条形图可以帮助分类变量的可视化。 </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#绘制条形图abs</span></span><br><span class="line">sb.countplot(x = <span class="string">'Type 1'</span>, data = df, palette = pkmn_type_colors)</span><br><span class="line"></span><br><span class="line"><span class="comment">#倾斜x轴的标签</span></span><br><span class="line">plt.xticks(rotation = <span class="number">-45</span>)</span><br></pre></td></tr></table></figure><pre><code>(array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14]), &lt;a list of 15 Text xticklabel objects&gt;)</code></pre><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/seaborn/output_42_1.png" alt="png"></p><h3 id="Factor-plots"><a href="#Factor-plots" class="headerlink" title="Factor plots"></a>Factor plots</h3><p>Factor plots能够根据类别分离图表。 </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#分离图表</span></span><br><span class="line">g = sb.factorplot(x = <span class="string">'Type 1'</span>,</span><br><span class="line">                  y = <span class="string">'Attack'</span>,</span><br><span class="line">                  data = df,</span><br><span class="line">                  hue = <span class="string">'Stage'</span>,  <span class="comment">#用不同的颜色表示Stage</span></span><br><span class="line">                  col = <span class="string">'Stage'</span>,  <span class="comment">#根据Stage来分离图表</span></span><br><span class="line">                  kind = <span class="string">'swarm'</span>, <span class="comment">#创建群集图</span></span><br><span class="line">                 )</span><br><span class="line"></span><br><span class="line"><span class="comment">#倾斜x轴的标签</span></span><br><span class="line">plt.xticks(rotation = <span class="number">-45</span>)</span><br></pre></td></tr></table></figure><pre><code>D:\Function\Anaconda3\lib\site-packages\seaborn\categorical.py:3666: UserWarning: The `factorplot` function has been renamed to `catplot`. The original name will be removed in a future release. Please update your code. Note that the default `kind` in `factorplot` (`&apos;point&apos;`) has changed `&apos;strip&apos;` in `catplot`.  warnings.warn(msg)(array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12, 13, 14]), &lt;a list of 15 Text xticklabel objects&gt;)</code></pre><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/seaborn/output_44_2.png" alt="png"></p><p>可以得到根据Stage分离的三个图表，分别用不同颜色的点表示不同的Pokemon。 </p><h3 id="Density-Plot"><a href="#Density-Plot" class="headerlink" title="Density Plot"></a>Density Plot</h3><p>密度图显示的是两个变量之间的分布。<br>曲线越密集的地方说明两个变量的关系越近，越稀疏的地方说明关系越远。 </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#创建密度图</span></span><br><span class="line">sb.kdeplot(df.Attack, df.Defense)</span><br></pre></td></tr></table></figure><pre><code>D:\Function\Anaconda3\lib\site-packages\scipy\stats\stats.py:1713: FutureWarning: Using a non-tuple sequence for multidimensional indexing is deprecated; use `arr[tuple(seq)]` instead of `arr[seq]`. In the future this will be interpreted as an array index, `arr[np.array(seq)]`, which will result either in an error or a different result.  return np.add.reduce(sorted[indexer] * weights, axis=axis) / sumval&lt;matplotlib.axes._subplots.AxesSubplot at 0x2ea9a8d6f60&gt;</code></pre><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/seaborn/output_47_2.png" alt="png"></p><h3 id="Joint-Distribution-Plot"><a href="#Joint-Distribution-Plot" class="headerlink" title="Joint Distribution Plot"></a>Joint Distribution Plot</h3><p>联合分布图将散点图和直方图的信息结合起来，提供双变量分布的详细信息。 </p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#创建联合分布图</span></span><br><span class="line">sb.jointplot(x = <span class="string">'Attack'</span>, y = <span class="string">'Defense'</span>, data = df)</span><br></pre></td></tr></table></figure><pre><code>&lt;seaborn.axisgrid.JointGrid at 0x2ea9ab74da0&gt;</code></pre><p><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/seaborn/output_49_1.png" alt="png"></p><p>这里只是介绍了Seaborn常用的绘图功能，还有更强大的功能<a href="http://seaborn.pydata.org/examples/anscombes_quartet.html" target="_blank" rel="noopener">Example gallery</a>需要我们去学习，去探索。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Seaborn是基于matplotlib的图形可视化python包。它提供了一种高度交互式界面，便于用户能够做出各种有吸引力的统计图表。&lt;br&gt;Seaborn是在matplotlib的基础上进行了更高级的API封装，从而使得作图更加容易，在大多数情况下使用seaborn能做出很具有吸引力的图，而使用matplotlib就能制作具有更多特色的图。应该把Seaborn视为matplotlib的补充，而不是替代物。同时它能高度兼容numpy与pandas数据结构以及scipy与statsmodels等统计模式。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Python" scheme="http://www.codingpy.cn/categories/Python/"/>
    
    
      <category term="Python" scheme="http://www.codingpy.cn/tags/Python/"/>
    
      <category term="seaborn" scheme="http://www.codingpy.cn/tags/seaborn/"/>
    
  </entry>
  
  <entry>
    <title>SQL学习日记（二）</title>
    <link href="http://www.codingpy.cn/2019/07/21/SQL_learndiary2/"/>
    <id>http://www.codingpy.cn/2019/07/21/SQL_learndiary2/</id>
    <published>2019-07-21T00:30:00.000Z</published>
    <updated>2019-09-19T14:37:01.430Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://www.raincent.com/uploadfile/2015/1206/20151206103021361.jpg" alt></p><a id="more"></a><h2 id="章节导航"><a href="#章节导航" class="headerlink" title="章节导航"></a>章节导航</h2><hr><ol><li>SQL语句的多表查询方式</li><li>创建和管理DLL</li><li>数据处理 DML</li><li>约束</li></ol><h2 id="SQL语句的多表查询方式"><a href="#SQL语句的多表查询方式" class="headerlink" title="SQL语句的多表查询方式"></a>SQL语句的多表查询方式</h2><p>例如：按照 department_id 查询 employees(员工表)和 departments(部门表)的信息。</p><ul><li>方式一( 通用型):<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT ... FROM ... WHERE</span><br></pre></td></tr></table></figure></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT e.last_name, e.department_id, d.department_name</span><br><span class="line">FROM employees e, departments d</span><br><span class="line">WHERE e.`department_id` = d.`department_id`;</span><br></pre></td></tr></table></figure><ul><li>方式二：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT ... FROM ... NATURAL JOIN ...</span><br></pre></td></tr></table></figure></li></ul><p>有局限性：会自动连接两个表中相同的列(可能有多个:department_id 和manager_id)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT last_name,department_id,department_name</span><br><span class="line">FROM employees</span><br><span class="line">NATURAL JOIN departments</span><br></pre></td></tr></table></figure><p>方式三：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT ... JOIN ... USING ...</span><br></pre></td></tr></table></figure><p>有局限性：好于方式二，但若多表的连接列列名不同，此法不合适</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT last_name,department_id,department_name</span><br><span class="line">FROM employees</span><br><span class="line">JOIN departments</span><br><span class="line">USING(department_id)</span><br></pre></td></tr></table></figure><p>方式四：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT ... FROM ... JOIN ... ON ...</span><br></pre></td></tr></table></figure><p>常用方式，较方式一，更易实现外联接(左、右、满)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT last_name,e.department_id,department_name</span><br><span class="line">FROM employees e</span><br><span class="line">JOIN departments d</span><br><span class="line">ON e.department_id = d.department_id</span><br></pre></td></tr></table></figure><ol><li>内连接<ol><li></li></ol> –等值连接<br> –不等值连接<ol start="2"><li></li></ol> –非自连接<br> –自连接</li><li>外连接<br> –左外连接、右外连接、满外连接</li></ol><h2 id="创建和管理DLL"><a href="#创建和管理DLL" class="headerlink" title="创建和管理DLL"></a>创建和管理DLL</h2><p>  CRAETE TABLE /TRUNCATE TABLE /ALTER TABLE /REANME…TO/DROP TABLE ..操<br>作完以后，自动 commit;所以，rollback 对其操作，没有效果</p><ol><li><p>创建表</p><ol><li><p>直接创建</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table emp1(</span><br><span class="line">name varchar2(20),</span><br><span class="line">salary number(8,2)default 1000,</span><br><span class="line">id number(4),</span><br><span class="line">hire_date date</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li><li><p>通过子查询的方式创建</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table emp2</span><br><span class="line">as</span><br><span class="line">select last_name name,employee_id id,hire_date</span><br><span class="line">from employees;</span><br></pre></td></tr></table></figure><p>或者</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create table emp2</span><br><span class="line">as</span><br><span class="line">select last_name name,employee_id id,hire_date</span><br><span class="line">from employees</span><br><span class="line">where department_id = 80;/where 1=2;</span><br></pre></td></tr></table></figure></li></ol></li><li><p>修改表</p><ol><li><p>增加新的列</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter table emp1</span><br><span class="line">add(birthday date)</span><br></pre></td></tr></table></figure></li><li><p>修改现有的列</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter table emp1</span><br><span class="line">modify(name varchar2(25) default &apos;abc&apos;)</span><br></pre></td></tr></table></figure></li><li><p>重命名现有的列</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter table emp1</span><br><span class="line">rename column salary to sal;</span><br></pre></td></tr></table></figure></li><li><p>删除现有的列</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter table emp1</span><br><span class="line">drop column birthday;</span><br></pre></td></tr></table></figure></li></ol></li><li><p>清空表中的数据(与 与 delete from table_name </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">truncate table emp2;</span><br></pre></td></tr></table></figure></li><li><p>重命名表</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename emp2 to emp3;</span><br></pre></td></tr></table></figure></li><li><p>删除表</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop table emp3;</span><br></pre></td></tr></table></figure></li></ol><h2 id="数据处理"><a href="#数据处理" class="headerlink" title="数据处理"></a>数据处理</h2><ol><li><p>增</p><ol><li><p>增添一条记录</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">insert into [表名](,,,,,)</span><br><span class="line">values(,,,,,)</span><br></pre></td></tr></table></figure></li><li><p>从其它表中拷贝数据</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">insert into [表名]</span><br><span class="line">select .... from [另一个表]</span><br><span class="line">where ....</span><br></pre></td></tr></table></figure></li></ol></li><li><p>改</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">update [表名]</span><br><span class="line">set .....</span><br><span class="line">where ....</span><br></pre></td></tr></table></figure></li><li><p>删</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">delete from [表名]</span><br><span class="line">where ....</span><br></pre></td></tr></table></figure></li><li><p>查(最常用的数据库操作)</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">select ....</span><br><span class="line">from …</span><br><span class="line">where ….</span><br><span class="line">group by …</span><br><span class="line">having …</span><br><span class="line">order by ….</span><br></pre></td></tr></table></figure></li></ol><h2 id="约束"><a href="#约束" class="headerlink" title="约束"></a>约束</h2><p>对创建的表的列属性、字段进行的限制。诸如:not null/unique/primary<br>key/foreign key/check</p><ol><li><p>如何定义约束— 在创建表的同时，添加对应属性的约束</p><ol><li><p>表级约束 &amp; 列级约束</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">create table emp1(</span><br><span class="line">employee_id number(8),</span><br><span class="line">salary number(8),</span><br><span class="line"></span><br><span class="line">-- 列级约束</span><br><span class="line">hire_date date not null,</span><br><span class="line">dept_id number(8),</span><br><span class="line">email varchar2(8) constraint emp1_email_uk unique,</span><br><span class="line">name varchar2(8) constaint emp1_name_uu not null,</span><br><span class="line">first_name varchar2(8),</span><br><span class="line"></span><br><span class="line">-- 表级约束</span><br><span class="line">constraint emp1_emp_id_pk primary key(employee_id),</span><br><span class="line">constraint emp1_fir_name_uk unique(first_name),</span><br><span class="line">constraint  emp1_dept_id_fk  foreign  key(dept_id)  references departments(department_id) ON DELETE CASCADE</span><br><span class="line">)</span><br></pre></td></tr></table></figure></li><li><p>只有 not null 时只能使用列级约束，其他的约束两种方式皆可    </p></li></ol></li><li><p>添加和删除表的约束– 在创建表以后，只能添加和删除，不能修改</p><ol><li><p>添加</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter table emp1</span><br><span class="line">add constaint emp1_sal_ck check(salary &gt; 0)</span><br></pre></td></tr></table></figure><ol><li>对于 not null 来说，不用 add ，需要 modify ：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter table emp1</span><br><span class="line">modify (salary not null)</span><br></pre></td></tr></table></figure></li></ol></li><li><p>删除</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter table emp1</span><br><span class="line">drop constaint emp1_sal_ck</span><br></pre></td></tr></table></figure></li><li><p>使某一个约束失效：此约束还存在于表中，只是不起作用</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter table emp1</span><br><span class="line">disable constraint emp1_email_uk;</span><br></pre></td></tr></table></figure></li><li><p>使某一个约束激活：激活以后，此约束具有约束力</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alter table emp1</span><br><span class="line">enable constraint emp1_email_uk;</span><br></pre></td></tr></table></figure></li></ol></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://www.raincent.com/uploadfile/2015/1206/20151206103021361.jpg&quot; alt&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="数据库" scheme="http://www.codingpy.cn/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
      <category term="数据库" scheme="http://www.codingpy.cn/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
      <category term="SQL" scheme="http://www.codingpy.cn/tags/SQL/"/>
    
  </entry>
  
  <entry>
    <title>SQL学习日记（一）</title>
    <link href="http://www.codingpy.cn/2019/07/18/SQL_learndiary1/"/>
    <id>http://www.codingpy.cn/2019/07/18/SQL_learndiary1/</id>
    <published>2019-07-18T00:30:00.000Z</published>
    <updated>2019-09-19T14:26:23.462Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://www.raincent.com/uploadfile/2015/1206/20151206103021361.jpg" alt></p><a id="more"></a><h2 id="数据库的好处"><a href="#数据库的好处" class="headerlink" title="数据库的好处"></a>数据库的好处</h2><pre><code>1.持久化数据到本地2.可以实现结构化查询，方便管理</code></pre><h2 id="数据库相关概念"><a href="#数据库相关概念" class="headerlink" title="数据库相关概念"></a>数据库相关概念</h2><p>1、DB：数据库，保存一组有组织的数据的容器<br>2、DBMS：数据库管理系统，又称为数据库软件（产品），用于管理DB中的数据<br>3、SQL:结构化查询语言，用于和DBMS通信的语言</p><h2 id="数据库存储数据的特点"><a href="#数据库存储数据的特点" class="headerlink" title="数据库存储数据的特点"></a>数据库存储数据的特点</h2><p>1、将数据放到表中，表再放到库中<br>2、一个数据库中可以有多个表，每个表都有一个的名字，用来标识自己。表名具有唯一性。<br>3、表具有一些特性，这些特性定义了数据在表中如何存储，类似java中 “类”的设计。<br>4、表由列组成，我们也称为字段。所有表都是由一个或多个列组成的，每一列类似java 中的”属性”<br>5、表中的数据是按行存储的，每一行类似于java中的“对象”。</p><h2 id="MySQL服务的启动和停止"><a href="#MySQL服务的启动和停止" class="headerlink" title="MySQL服务的启动和停止"></a>MySQL服务的启动和停止</h2><p>方式一：计算机——右击管理——服务<br>方式二：通过管理员身份运行</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">net start 服务名（启动服务）</span><br><span class="line">net stop 服务名（停止服务）</span><br></pre></td></tr></table></figure><h2 id="MySQL服务的登录和退出"><a href="#MySQL服务的登录和退出" class="headerlink" title="MySQL服务的登录和退出"></a>MySQL服务的登录和退出</h2><p>方式一：通过mysql自带的客户端<br>只限于root用户</p><p>方式二：通过windows自带的客户端<br>登录：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql 【-h主机名 -P端口号 】-u用户名 -p密码</span><br></pre></td></tr></table></figure><p>退出：<br>exit或ctrl+C</p><h2 id="MySQL的常见命令"><a href="#MySQL的常见命令" class="headerlink" title="MySQL的常见命令"></a>MySQL的常见命令</h2><p>1.查看当前所有的数据库</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show databases;</span><br></pre></td></tr></table></figure><p>2.打开指定的库</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use 库名</span><br></pre></td></tr></table></figure><p>3.查看当前库的所有表</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show tables;</span><br></pre></td></tr></table></figure><p>4.查看其它库的所有表</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show tables from 库名;</span><br></pre></td></tr></table></figure><p>5.创建表</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table 表名(</span><br><span class="line"></span><br><span class="line">列名 列类型,</span><br><span class="line">列名 列类型，</span><br><span class="line">。。。</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>6.查看表结构</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">desc 表名;</span><br></pre></td></tr></table></figure><p>7.查看服务器的版本<br>方式一：登录到mysql服务端</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select version();</span><br></pre></td></tr></table></figure><p>方式二：没有登录到mysql服务端</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql --version</span><br><span class="line">或</span><br><span class="line">mysql --V</span><br></pre></td></tr></table></figure><h2 id="MySQL的语法规范"><a href="#MySQL的语法规范" class="headerlink" title="MySQL的语法规范"></a>MySQL的语法规范</h2><p>1.不区分大小写,但建议关键字大写，表名、列名小写<br>2.每条命令最好用分号结尾<br>3.每条命令根据需要，可以进行缩进 或换行<br>4.注释<br>   单行注释：#注释文字<br>   单行注释：– 注释文字<br>   多行注释：/* 注释文字  */</p><h2 id="SQL的语言分类"><a href="#SQL的语言分类" class="headerlink" title="SQL的语言分类"></a>SQL的语言分类</h2><p>DQL（Data Query Language）：数据查询语言<br>    select<br>DML(Data Manipulate Language):数据操作语言<br>    insert 、update、delete<br>DDL（Data Define Languge）：数据定义语言<br>    create、drop、alter<br>TCL（Transaction Control Language）：事务控制语言<br>    commit、rollback</p><h2 id="SQL的常见命令"><a href="#SQL的常见命令" class="headerlink" title="SQL的常见命令"></a>SQL的常见命令</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">show databases； 查看所有的数据库</span><br><span class="line">use 库名； 打开指定 的库</span><br><span class="line">show tables ; 显示库中的所有表</span><br><span class="line">show tables from 库名;显示指定库中的所有表</span><br><span class="line">create table 表名(</span><br><span class="line">字段名 字段类型,</span><br><span class="line">字段名 字段类型</span><br><span class="line">); 创建表</span><br><span class="line"></span><br><span class="line">desc 表名; 查看指定表的结构</span><br><span class="line">select * from 表名;显示表中的所有数据</span><br></pre></td></tr></table></figure><h2 id="SQL实例"><a href="#SQL实例" class="headerlink" title="SQL实例"></a>SQL实例</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">-- select department_name from departments</span><br><span class="line"></span><br><span class="line">-- select * from departments where department_name = &apos;Con&apos;</span><br><span class="line"></span><br><span class="line">-- select * from departments where department_name = &apos;Con&apos; or location_id = 1700</span><br><span class="line"></span><br><span class="line">-- select distinct location_id from departments;</span><br><span class="line"></span><br><span class="line">-- select department_id from departments where location_id in (1700)</span><br><span class="line"></span><br><span class="line">-- select department_id from departments where department_name like &apos;%Con%&apos;</span><br><span class="line"></span><br><span class="line">-- select count(depart) from departments;</span><br><span class="line"></span><br><span class="line">-- insert into departments(department_id, department_name, manager_id, location_id) values(290, &apos;Xrh&apos;, 117, 1100)</span><br><span class="line"></span><br><span class="line">-- update departments set manager_id = 512 where department_name = &apos;Gov&apos;</span><br><span class="line"></span><br><span class="line">-- DELETE from departments where department_id = 290;</span><br><span class="line"></span><br><span class="line">-- CREATE table person(</span><br><span class="line">-- username varchar(10),</span><br><span class="line">-- usergender varchar(6),</span><br><span class="line">-- userage int(4),</span><br><span class="line">-- primary key(username)</span><br><span class="line">-- );</span><br><span class="line"></span><br><span class="line">-- drop table person;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://www.raincent.com/uploadfile/2015/1206/20151206103021361.jpg&quot; alt&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="数据库" scheme="http://www.codingpy.cn/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
      <category term="数据库" scheme="http://www.codingpy.cn/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
      <category term="SQL" scheme="http://www.codingpy.cn/tags/SQL/"/>
    
  </entry>
  
  <entry>
    <title>windows环境下搭建spark开发环境(IDEA)</title>
    <link href="http://www.codingpy.cn/2019/07/14/spark_init/"/>
    <id>http://www.codingpy.cn/2019/07/14/spark_init/</id>
    <published>2019-07-14T00:30:00.000Z</published>
    <updated>2019-09-20T14:19:11.805Z</updated>
    
    <content type="html"><![CDATA[<p>“大数据”（Big Data）指一般的软件工具难以捕捉、管理和分析的大容量数据。“大数据”之“大”，并不仅仅在于“容量之大”，更大的意义在于：通过对海量数据的交换、整合和分析，发现新的知识，创造新的价值，带来“大知识”、“大科技”、“大利润”和“大发展”。“大数据”能帮助企业找到一个个难题的答案，给企业带来前所未有的商业价值与机会。大数据同时也给企业的IT系统提出了巨大的挑战。通过不同行业的“大数据”应用状况，我们能够看到企业如何使用大数据和云计算技术，解决他们的难题，灵活、快速、高效地响应瞬息万变的市场需求。</p><a id="more"></a><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><hr><p>本文重点介绍在如何Windows 10下开发spark应用程序的依赖环境的搭建。</p><h1 id="本章概要"><a href="#本章概要" class="headerlink" title="本章概要"></a>本章概要</h1><hr><ol><li>版本说明</li><li>环境配置<ul><li>jdk配置</li><li>scala安装配置</li><li>spark安装配置</li><li>hadoop安装配置</li><li>Intellij IDEA下载与配置</li></ul></li></ol><h1 id="版本说明"><a href="#版本说明" class="headerlink" title="版本说明"></a>版本说明</h1><hr><ol><li>jdk:1.8</li><li>scala:2.12.0</li><li>spark:2.4.3</li><li>hadoop:2.7.7</li></ol><h1 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h1><hr><h2 id="jdk配置"><a href="#jdk配置" class="headerlink" title="jdk配置"></a>jdk配置</h2><ol><li>下载：登录<a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" target="_blank" rel="noopener">Oracle官网</a>，接受协议，注册登录，选择对应版本。因为我的本机是64位Windows，所以需要下载64位（Windows x64）JDK安装包。 <center><fancybox>![](https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/spark-init/jdkdownload.png)</fancybox></center></li><li>Windows下安装JDK非常方便，双击安装程序后，直接单击下一步即可，默认安装到<code>C:\Program Files\Java</code>目录下。其间会安装JRE，默认一下步即可。</li><li>设置环境变量 :右键单击桌面上的“此电脑”图标，在弹出的右键快捷菜单中选择最后一个“属性”选项；在弹出的系统窗口中，单击左侧“高级系统设置”选项，弹出“系统属性”对话框，如下图。 <center><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/spark-init/jdkpath.png" alt></fancybox></center>然后单击中间的“高级”选项卡，再单击下方的“环境变量(N)…”按钮。在弹出的环境变量对话框中，首先单击下方的“新建（W）…”按钮，然后在弹出的新建环境变量中输入对应的值。 <center><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/spark-init/jdkpath1.png" alt></fancybox></center>在环境变量中找到“Path”添加jdk和jre下bin的地址，如下图：<center><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/spark-init/jdkpath2.png" alt></fancybox></center>新建<code>CLASS_PATH</code>，如下图：<center><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/spark-init/jdkpath3.png" alt></fancybox></center>检验配置是否成功，在cmd中运行java -version出现以下结果则说明jdk安装配置成功。<center><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/spark-init/jdkpath4.png" alt></fancybox></center></li></ol><h2 id="scala安装配置"><a href="#scala安装配置" class="headerlink" title="scala安装配置"></a>scala安装配置</h2><ol><li>下载：通过<a href="http://spark.apache.org/downloads.html" target="_blank" rel="noopener">Spark官网下载</a>页面 可知“Note: Starting version 2.0, Spark is built with Scala 2.11 by default.”，下载Spark2.4.3对应的 <code>Scala 2.12.x</code>。登录<a href="http://www.scala-lang.org/" target="_blank" rel="noopener">Scala官网</a>，单击download按钮，然后再“Other Releases”标题下找到“Last 2.12.x maintenance release - Scala 2.12.0”链接。进入<a href="http://www.scala-lang.org/download/2.12.0.html" target="_blank" rel="noopener">downloan</a>页面，下拉找到如下图内容，下载msi格式的安装包即可。<center><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/spark-init/scaladownload.png" alt></fancybox></center></li><li>安装: 默认安装到<code>C:\Program Files (x86)\scala</code>目录下<center><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/spark-init/sparkinstall.png" alt></fancybox></center></li><li>环境变量：与设置Java环境变量类型， <code>SCALA_HOME=C:\Program Files (x86)\scala</code> <code>Path</code>环境变量在最后追加;设置成功后在<code>win+R</code>输入<code>cmd</code>后打开命令行输入<code>scala -version</code>可以看到安装的版本<code>%SCALA_HOME%\bin</code>；<center><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/spark-init/scalainstalled.png" alt></fancybox></center></li></ol><h2 id="安装Maven"><a href="#安装Maven" class="headerlink" title="安装Maven"></a>安装Maven</h2><ol><li>Maven的安装与配置可以参考：《<a href="https://blog.csdn.net/chengyuqiang/article/details/72082149" target="_blank" rel="noopener">Hadoop基础教程-第4章 HDFS的Java API（4.1 Maven入门）</a>》<code>Intellij IDEA</code>上自带Maven，本文不再详细介绍<h2 id="Intellij-IDEA下载与配置"><a href="#Intellij-IDEA下载与配置" class="headerlink" title="Intellij IDEA下载与配置"></a>Intellij IDEA下载与配置</h2></li><li>下载与安装：登录<a href="https://www.jetbrains.com/idea/download/" target="_blank" rel="noopener">官网</a>，按照自己的需求下载（<code>ultimate</code>，旗舰版）或者（<code>Community</code>，社区版）。<code>Ultimate</code>版本是商业软件，需要付费，<code>Community</code> 版为免费版，足够平时日常开发需要。比如这里直接下载<code>Community</code><center><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/spark-init/Intellij%20IDEA.png" alt></fancybox></center></li><li>启动，安装完成后，单击<code>IntelliJ IDEA</code>图标即可启动<code>IntelliJ IDEA</code>. 由于是第一次安装，所以不需要导入配置。默认选项即可。<center><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/spark-init/ideaconfig.png" alt></fancybox></center></li><li>选择“Evaluate for free”进入免费版<center><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/spark-init/idea3.png" alt></fancybox></center>可以根据自身的习惯选择风格，并点击左下角“<code>Skip Remaining and Set Default”</code><center><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/spark-init/Idea4.png" alt></fancybox></center></li><li>安装<code>scala</code>插件：点击左下角：<code>Configure-&gt;Plugins</code> 搜索并安装scala<center><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/spark-init/idea5.png" alt></fancybox></center><center><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/spark-init/idea6.png" alt></fancybox></center>安装完成后重启IDEA，然后开始配置全局scala SDK<fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/spark-init/idea7.png" alt></fancybox></li><li>配置JDK： 首先打开<code>Project Structure</code>，如下图然后我们添加上文安装的JDK，配置完成后点击OK，如下图：<fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/spark-init/idea8.png" alt></fancybox></li><li>配置JDK 配置全局scala SDK：选中“<code>Global Libraries</code>”，点击“+”号，在弹出的菜单中选中“Scala SDK”，如下图：<fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/spark-init/idea9.png" alt></fancybox>在弹出的“<code>Select JAR&#39;s for the new Scala SDK</code>”中选择与本机scala版本一致的Version，在这里由于我的scala版本是2.12.0 所以我选择的是2.12.0版本<fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/spark-init/idea10.png" alt></fancybox>点击右下角OK完成配置<h2 id="创建Maven项目"><a href="#创建Maven项目" class="headerlink" title="创建Maven项目"></a>创建Maven项目</h2></li><li>单击“<code>Create New Project</code>”<fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/spark-init/idea11.png" alt></fancybox>选择maven<fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/spark-init/idea12.png" alt></fancybox>点击<code>Next</code>，填写<code>GroupID</code>和<code>ArtifactID</code><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/spark-init/idea13.png" alt></fancybox>点击Next，如下图：<fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/spark-init/idea14.png" alt></fancybox>点击Finish，如下图：(在此步骤可以更改Content root 和 Module file location 的路径)<fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/spark-init/idea15.png" alt></fancybox>创建完后右下角如果出现提示：<fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/spark-init/idea16.png" alt></fancybox>请点击<code>Enable Auto-Import</code></li><li>创建完后将scala框架添加到项目(若不设置有可能无法创建 scala class)：在IDEA启动后进入的界面中，可以看到界面左侧的项目界面，已经有一个名称为simpleSpark的工程。请在该工程名称上右键单击，在弹出的菜单中，选择<code>Add Framework Surport</code>，在左侧有一排可勾选项，找到scala，勾选即可（我的这里没有找到，但是也能运行，为了确保无误，借用<a href="https://blog.csdn.net/haijiege/article/details/80775792" target="_blank" rel="noopener">haijiege</a>的图）<fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/spark-init/idea17.png" alt></fancybox></li><li>将项目文件设置为source root ，选中scala–&gt;右键<code>快捷菜单</code>–&gt;<code>Mark Directory as</code> –&gt;<code>Sources root</code><fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/spark-init/idea18.png" alt></fancybox>    </li></ol><h2 id="编辑代码"><a href="#编辑代码" class="headerlink" title="编辑代码"></a>编辑代码</h2><ol><li>pom.xml<br>Spark2.4.3 Maven库请参见 <a href="https://mvnrepository.com/artifact/org.apache.spark/spark-core_2.12/2.4.3" target="_blank" rel="noopener">https://mvnrepository.com/artifact/org.apache.spark/spark-core_2.12/2.4.3</a></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</span><br><span class="line">    &lt;groupId&gt;Test.pack&lt;/groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;SparkTest&lt;/artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;</span><br><span class="line">    &lt;packaging&gt;jar&lt;/packaging&gt;</span><br><span class="line">    &lt;inceptionYear&gt;2008&lt;/inceptionYear&gt;</span><br><span class="line">    &lt;properties&gt;</span><br><span class="line">        &lt;spark.version&gt;2.4.3&lt;/spark.version&gt;</span><br><span class="line">        &lt;scala.version&gt;2.12.0&lt;/scala.version&gt;</span><br><span class="line">    &lt;/properties&gt;</span><br><span class="line"></span><br><span class="line">    &lt;repositories&gt;</span><br><span class="line">        &lt;repository&gt;</span><br><span class="line">            &lt;id&gt;nexus-aliyun&lt;/id&gt;</span><br><span class="line">            &lt;name&gt;Nexus aliyun&lt;/name&gt;</span><br><span class="line">            &lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public&lt;/url&gt;</span><br><span class="line">        &lt;/repository&gt;</span><br><span class="line">    &lt;/repositories&gt;</span><br><span class="line"></span><br><span class="line">    &lt;pluginRepositories&gt;</span><br><span class="line">        &lt;pluginRepository&gt;</span><br><span class="line">            &lt;id&gt;scala-tools.org&lt;/id&gt;</span><br><span class="line">            &lt;name&gt;Scala-Tools Maven2 Repository&lt;/name&gt;</span><br><span class="line">            &lt;url&gt;http://scala-tools.org/repo-releases&lt;/url&gt;</span><br><span class="line">        &lt;/pluginRepository&gt;</span><br><span class="line">    &lt;/pluginRepositories&gt;</span><br><span class="line"></span><br><span class="line">    &lt;dependencies&gt;</span><br><span class="line">        &lt;!-- https://mvnrepository.com/artifact/org.apache.spark/spark-core --&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;spark-core_2.12&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;2.4.3&lt;/version&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line"></span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;junit&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;junit&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;4.4&lt;/version&gt;</span><br><span class="line">            &lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">        &lt;dependency&gt;</span><br><span class="line">            &lt;groupId&gt;org.specs&lt;/groupId&gt;</span><br><span class="line">            &lt;artifactId&gt;specs&lt;/artifactId&gt;</span><br><span class="line">            &lt;version&gt;1.2.5&lt;/version&gt;</span><br><span class="line">            &lt;scope&gt;test&lt;/scope&gt;</span><br><span class="line">        &lt;/dependency&gt;</span><br><span class="line">    &lt;/dependencies&gt;</span><br><span class="line"></span><br><span class="line">    &lt;build&gt;</span><br><span class="line">        &lt;plugins&gt;</span><br><span class="line">            &lt;plugin&gt;</span><br><span class="line">                &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;</span><br><span class="line">                &lt;version&gt;2.2-beta-5&lt;/version&gt;</span><br><span class="line">                &lt;configuration&gt;</span><br><span class="line">                    &lt;classifier&gt;dist&lt;/classifier&gt;</span><br><span class="line">                    &lt;appendAssemblyId&gt;true&lt;/appendAssemblyId&gt;</span><br><span class="line">                    &lt;descriptorRefs&gt;</span><br><span class="line">                        &lt;descriptor&gt;jar-with-dependencies&lt;/descriptor&gt;</span><br><span class="line">                    &lt;/descriptorRefs&gt;</span><br><span class="line">                &lt;/configuration&gt;</span><br><span class="line">                &lt;executions&gt;</span><br><span class="line">                    &lt;execution&gt;</span><br><span class="line">                        &lt;id&gt;make-assembly&lt;/id&gt;</span><br><span class="line">                        &lt;phase&gt;package&lt;/phase&gt;</span><br><span class="line">                        &lt;goals&gt;</span><br><span class="line">                            &lt;goal&gt;single&lt;/goal&gt;</span><br><span class="line">                        &lt;/goals&gt;</span><br><span class="line">                    &lt;/execution&gt;</span><br><span class="line">                &lt;/executions&gt;</span><br><span class="line">            &lt;/plugin&gt;</span><br><span class="line">        &lt;/plugins&gt;</span><br><span class="line">    &lt;/build&gt;</span><br><span class="line">&lt;/project&gt;</span><br></pre></td></tr></table></figure><ol><li><p>保存pom.xml文件后，如果Intellij IDEA右下角出现如下提示，请单击“<code>Enable Auto-Import</code>” <fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/spark-init/idea16.png" alt></fancybox></p></li><li><p>WordCount.scala :新建<code>Scala Class</code>类<code>WordCount.scala</code>，Scala源文件后缀名是.scala。通过右键刚刚设置为<code>sources root</code>的scala文件夹，就有了<code>new</code>-&gt;<code>scala class</code>的选项。新建一个<code>scala class</code>，并且命名<code>WordCount</code>，选择object类型。打开建好的<code>WordCount.scala</code>文件，清空！然后黏贴以下代码：</p></li></ol><h1 id="程序运行"><a href="#程序运行" class="headerlink" title="程序运行"></a>程序运行</h1><hr><h2 id="文件"><a href="#文件" class="headerlink" title="文件"></a>文件</h2><h3 id="数据文件"><a href="#数据文件" class="headerlink" title="数据文件"></a>数据文件</h3><p><a href="http://fff" target="_blank" rel="noopener">sampleDataSet</a></p><h3 id="程序文件"><a href="#程序文件" class="headerlink" title="程序文件"></a>程序文件</h3><p><a href="http://fff" target="_blank" rel="noopener">WordCount</a></p><h2 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h2><p>在源文件代码中右键单击–&gt;Run “<code>WordCount</code>”<fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/spark-init/idea19.png" alt></fancybox></p><p>运行结果如下（输出的信息较多请上下翻一下就能找到）<fancybox><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/spark-init/idea20.png" alt></fancybox></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;“大数据”（Big Data）指一般的软件工具难以捕捉、管理和分析的大容量数据。“大数据”之“大”，并不仅仅在于“容量之大”，更大的意义在于：通过对海量数据的交换、整合和分析，发现新的知识，创造新的价值，带来“大知识”、“大科技”、“大利润”和“大发展”。“大数据”能帮助企业找到一个个难题的答案，给企业带来前所未有的商业价值与机会。大数据同时也给企业的IT系统提出了巨大的挑战。通过不同行业的“大数据”应用状况，我们能够看到企业如何使用大数据和云计算技术，解决他们的难题，灵活、快速、高效地响应瞬息万变的市场需求。&lt;/p&gt;
    
    </summary>
    
    
      <category term="大数据" scheme="http://www.codingpy.cn/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
    
      <category term="大数据" scheme="http://www.codingpy.cn/tags/%E5%A4%A7%E6%95%B0%E6%8D%AE/"/>
    
      <category term="spark" scheme="http://www.codingpy.cn/tags/spark/"/>
    
  </entry>
  
  <entry>
    <title>软件合集（持续更新中ing……）</title>
    <link href="http://www.codingpy.cn/2019/07/10/extensions_gallery/"/>
    <id>http://www.codingpy.cn/2019/07/10/extensions_gallery/</id>
    <published>2019-07-10T00:30:00.000Z</published>
    <updated>2019-09-20T14:19:52.435Z</updated>
    
    <content type="html"><![CDATA[<p>各种软件资源，这里统统都有！</p><a id="more"></a><p>#一、Adobe全家桶 </p><p>1、Photoshop cc 2018<br>    <fancybox><br>    <img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/software/PS.jpg" alt><br>    </fancybox><br>    链接: <a href="https://pan.baidu.com/s/1S08r_Q-xkgYZTyfhqj91ww" target="_blank" rel="noopener">https://pan.baidu.com/s/1S08r_Q-xkgYZTyfhqj91ww</a> 提取码: aim2</p><p>2、Premiere Pro cc 2017<br>    <fancybox><br>    <img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/software/PR.jpg" alt><br>    </fancybox><br>    链接: <a href="https://pan.baidu.com/s/1vhFAEGwlaf8dS_xSX4BXxA" target="_blank" rel="noopener">https://pan.baidu.com/s/1vhFAEGwlaf8dS_xSX4BXxA</a> 提取码: uxmy</p><p>3、Illustrator CC 2018<br>    <fancybox><br>    <img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/software/AI.jpg" alt><br>    </fancybox><br>    链接: <a href="https://pan.baidu.com/s/1nxUtGFpqeQtw61_yVExhSA" target="_blank" rel="noopener">https://pan.baidu.com/s/1nxUtGFpqeQtw61_yVExhSA</a> 提取码: 9pgx</p><p>4、Adobe Effects CC 2018<br>    <fancybox><br>    <img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/software/AE.jpg" alt><br>    </fancybox><br>    链接: <a href="https://pan.baidu.com/s/1SwcSkVP_yKzvZGZ3OTF-dA提取码" target="_blank" rel="noopener">https://pan.baidu.com/s/1SwcSkVP_yKzvZGZ3OTF-dA提取码</a>: 626s</p><p>5、Dreamweaver<br>    <fancybox><br>    <img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/software/DR.jpg" alt><br>    </fancybox><br>    链接: <a href="https://pan.baidu.com/s/1csLtkNUSiOC2kOXTEtIm1Q" target="_blank" rel="noopener">https://pan.baidu.com/s/1csLtkNUSiOC2kOXTEtIm1Q</a> 提取码: t56s</p><p>6、Adobe破解软件<br>    链接: <a href="https://pan.baidu.com/s/1ZVQiBzcMf0M_0smakdSsUg" target="_blank" rel="noopener">https://pan.baidu.com/s/1ZVQiBzcMf0M_0smakdSsUg</a> 提取码: frjc</p><p>#二、office全家桶</p><p>1、Office 2010-专业增强版-个体零售版-64 位和 32 位-中文简体<br>    <fancybox><br>    <img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/software/OFFICE2010.jpg" alt><br>    </fancybox><br>    链接: <a href="https://pan.baidu.com/s/1D5tdwbKwRofmUz1UDozwDQ" target="_blank" rel="noopener">https://pan.baidu.com/s/1D5tdwbKwRofmUz1UDozwDQ</a> 提取码: w3ai</p><p>2、Office 2013-专业增强版-个体零售版-64 位和 32 位-中文简体<br>    <fancybox><br>    <img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/software/OFFICE2013.jpg" alt><br>    </fancybox><br>    链接: <a href="https://pan.baidu.com/s/1oTmgGpTGvyjL8hn0v6mpnA" target="_blank" rel="noopener">https://pan.baidu.com/s/1oTmgGpTGvyjL8hn0v6mpnA</a> 提取码: daur</p><p>3、Office 2016-专业增强版-个体零售版-64 位和 32 位-中文简体<br>    <fancybox><br>    <img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/software/OFFICE2016.jpg" alt><br>    </fancybox><br>    链接: <a href="https://pan.baidu.com/s/1SZh_z4zubo_4UjfsXk7BLw" target="_blank" rel="noopener">https://pan.baidu.com/s/1SZh_z4zubo_4UjfsXk7BLw</a> 提取码: uny3</p><p>4、Office 2019<br>    <fancybox><br>    ![]<a href="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/software/OFFICE2019.jpg" target="_blank" rel="noopener">https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/software/OFFICE2019.jpg</a>)<br>    </fancybox><br>    链接: <a href="https://pan.baidu.com/s/1bTNJ5ONrceqmFvx6lT4O0Q" target="_blank" rel="noopener">https://pan.baidu.com/s/1bTNJ5ONrceqmFvx6lT4O0Q</a> 提取码: 3yqs</p><p>#三、IDE </p><p>##1、C&amp;C++ IDE:</p><p>###① C-Free<br>        <fancybox><br>        <img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/software/CFREE.jpg" alt><br>        </fancybox><br>        链接: <a href="https://pan.baidu.com/s/1GBcivRrNHEYEOtsBaEjGqA" target="_blank" rel="noopener">https://pan.baidu.com/s/1GBcivRrNHEYEOtsBaEjGqA</a> 提取码: 5b2e</p><p>###② vc6.0(兼容win10)<br>        <fancybox><br>        <img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/software/VC6.0.jpg" alt><br>        </fancybox><br>         链接: <a href="https://pan.baidu.com/s/1ng-HgcVprOtX5P4M5h7WUw" target="_blank" rel="noopener">https://pan.baidu.com/s/1ng-HgcVprOtX5P4M5h7WUw</a> 提取码: 8sqs</p><p>###③ codeblocks(ACM推荐IDE)<br>    <fancybox><br>    <img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/software/CB.jpg" alt><br>    </fancybox><br>    链接: <a href="https://pan.baidu.com/s/1ya1Ly7qKI-O4DiNStAsHzQ" target="_blank" rel="noopener">https://pan.baidu.com/s/1ya1Ly7qKI-O4DiNStAsHzQ</a> 提取码: 9425</p><p>###④ Dev C++（蓝桥杯官方指定IDE）<br>        <fancybox><br>        <img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/software/DEVC++.jpg" alt><br>        </fancybox><br>        链接: <a href="https://pan.baidu.com/s/1ydxrV5WLR505tNknK8YfcQ" target="_blank" rel="noopener">https://pan.baidu.com/s/1ydxrV5WLR505tNknK8YfcQ</a> 提取码: fjvz </p><p>###⑤ eclipse cpp版<br>        <fancybox><br>        <img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/software/ECLIPSE.jpg" alt><br>        </fancybox><br>        链接: <a href="https://pan.baidu.com/s/1HUZ8w2Jci6g88gVIs6iWNQ" target="_blank" rel="noopener">https://pan.baidu.com/s/1HUZ8w2Jci6g88gVIs6iWNQ</a> 提取码: q7ig</p><p>##2、Java IDE</p><p>###① IDEA<br>        <fancybox><br>        <img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/software/IDEA.jpg" alt><br>        </fancybox><br>         链接: <a href="https://pan.baidu.com/s/1bT41wqMWATNO4si1hbKS1g" target="_blank" rel="noopener">https://pan.baidu.com/s/1bT41wqMWATNO4si1hbKS1g</a> 提取码: ptmp</p><p>###② Eclipse<br>        <fancybox><br>        <img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/software/ECLIPSEJAVA.jpg" alt><br>        </fancybox><br>         链接: <a href="https://pan.baidu.com/s/1CPdHdYLBkdYcF8PPN463mA" target="_blank" rel="noopener">https://pan.baidu.com/s/1CPdHdYLBkdYcF8PPN463mA</a> 提取码: ksyh</p><p>###③ MyEclipse<br>        <fancybox><br>        <img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/software/MYECLIPSE.jpg" alt><br>        </fancybox><br>        链接: <a href="https://pan.baidu.com/s/1ZhwAtmklLJGVoVzdPMH_mg" target="_blank" rel="noopener">https://pan.baidu.com/s/1ZhwAtmklLJGVoVzdPMH_mg</a> 提取码: 8dph</p><p>##3、Python IDE</p><p>###① pycharm-professional<br>        <fancybox><br>        <img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/software/PYCHARM.jpg" alt><br>        </fancybox><br>        链接: <a href="https://pan.baidu.com/s/1O9W_qlMkch5H2hJKDaFwDg" target="_blank" rel="noopener">https://pan.baidu.com/s/1O9W_qlMkch5H2hJKDaFwDg</a> 提取码: c67v</p><p>###② Anaconda3<br>        <fancybox><br>        <img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/software/ANACONDA.jpg" alt><br>        </fancybox><br>        链接: <a href="https://pan.baidu.com/s/1v85y2SFWlbBd-UqlQQjI_A" target="_blank" rel="noopener">https://pan.baidu.com/s/1v85y2SFWlbBd-UqlQQjI_A</a> 提取码: aa9e</p><p>##4、Hbuilder<br>        <fancybox><br>        <img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/software/HBUILDER.jpg" alt><br>        </fancybox><br>    链接: <a href="https://pan.baidu.com/s/1IzTeJoP8eTkOJRWf5KnVFw" target="_blank" rel="noopener">https://pan.baidu.com/s/1IzTeJoP8eTkOJRWf5KnVFw</a> 提取码: e4yn</p><p>#四、思维导图XMind<br>    <fancybox><br>    <img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/cloud@master/img/software/XMIND.jpg" alt><br>    </fancybox><br>    链接:<a href="https://pan.baidu.com/s/1VawY6QZtJA6vNwVnBDy5hg" target="_blank" rel="noopener">https://pan.baidu.com/s/1VawY6QZtJA6vNwVnBDy5hg</a> 提取码: h4ay</p><p>#五、百度网盘不限速</p><pre><code>链接: https://pan.baidu.com/s/1gVUx0UfogSfE6Fc45vs-xw 提取码: z6hx</code></pre>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;各种软件资源，这里统统都有！&lt;/p&gt;
    
    </summary>
    
    
      <category term="软件资源" scheme="http://www.codingpy.cn/categories/%E8%BD%AF%E4%BB%B6%E8%B5%84%E6%BA%90/"/>
    
    
      <category term="软件" scheme="http://www.codingpy.cn/tags/%E8%BD%AF%E4%BB%B6/"/>
    
      <category term="持续更新" scheme="http://www.codingpy.cn/tags/%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0/"/>
    
  </entry>
  
  <entry>
    <title>Hello Stranger</title>
    <link href="http://www.codingpy.cn/2019/07/04/hello-world/"/>
    <id>http://www.codingpy.cn/2019/07/04/hello-world/</id>
    <published>2019-07-04T00:30:00.000Z</published>
    <updated>2019-09-20T14:20:45.640Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://www.codingpy.cn">Yinxu’s Blog</a>! This is your very first post. Check <a href="https://xaoxuu.com/wiki/" target="_blank" rel="noopener">documentation</a> for more info. </p><a id="more"></a><center><h1>Hi,it's Yinux's Blog.Nice to meet you!</h1><img src="https://cdn.jsdelivr.net/gh/InfiniteYinux/assets@master/biaoqing/paopao/E5A4AAE5BC80E5BF83_2x.png"></center>]]></content>
    
    <summary type="html">
    
      matplotlib - Pyplot 教程
    
    </summary>
    
    
    
  </entry>
  
</feed>
